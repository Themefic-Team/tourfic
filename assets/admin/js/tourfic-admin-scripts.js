/*! For license information please see tourfic-admin-scripts.js.LICENSE.txt */
(()=>{var t,e,a;(t=jQuery)(document).ready((function(){const e=new Notyf({ripple:!0,dismissable:!0,duration:3e3,position:{x:"right",y:"bottom"}});t(document).on("click",".tf-del-old-review-fields",(function(a){a.preventDefault(),t(this);var i={action:"tf_delete_old_review_fields",deleteAll:t(this).data("delete-all")};t.ajax({type:"post",url:tf_admin_params.ajax_url,data:i,beforeSend:function(t){e.success(tf_admin_params.deleting_old_review_fields)},success:function(t){e.success(t.data)},error:function(t){e.error(t.data)}})})),t(document).on("click",".remove-order-ids",(function(a){a.preventDefault();var i=t(this),n=t("#post_ID").val(),o={action:"tf_remove_room_order_ids",meta_field:i.closest(".tf-repeater-content-wrap").find(".tf-order_id input").attr("name"),post_id:n};t.ajax({type:"post",url:ajaxurl,data:o,beforeSend:function(t){e.success(tf_admin_params.deleting_room_order_ids)},success:function(t){e.success(t.data),location.reload()},error:function(t){e.error(t.data)}})})),t(document).on("click",".post-type-tf_tours #publish, .post-type-tf_tours #save-post",(function(a){if(0===t('textarea[name="tf_tours_opt[text_location]"]').val().length)return a.preventDefault,a.stopImmediatePropagation(),e.error(tf_admin_params.tour_location_required),!1})),t(document).on("click",".post-type-tf_hotel #publish, .post-type-tf_hotel #save-post",(function(a){if(0===t('textarea[name="tf_hotels_opt[address]"]').val().length)return a.preventDefault,a.stopImmediatePropagation(),e.error(tf_admin_params.hotel_location_required),!1})),t(document).on("click",".post-type-tf_tours #publish, .post-type-tf_tours #save-post",(function(a){if(0==t("#set-post-thumbnail").find("img").size())return a.preventDefault,a.stopImmediatePropagation(),e.error(tf_admin_params.tour_feature_image_required),!1})),t(document).on("click",".post-type-tf_hotel #publish, .post-type-tf_hotel #save-post",(function(a){if(0==t("#set-post-thumbnail").find("img").size())return a.preventDefault,a.stopImmediatePropagation(),e.error(tf_admin_params.hotel_feature_image_required),!1})),t(document).on("click",".tf-install",(function(e){e.preventDefault();var a=t(this),i=a.attr("data-plugin-slug");a.addClass("updating-message").text(tf_admin_params.installing);var n={action:"tf_ajax_install_plugin",_ajax_nonce:tf_admin_params.tf_nonce,slug:i};jQuery.post(tf_admin_params.ajax_url,n,(function(t){a.removeClass("updating-message"),a.addClass("updated-message").text(tf_admin_params.installed),a.attr("href",t.data.activateUrl)})).fail((function(){a.removeClass("updating-message").text(tf_admin_params.install_failed)})).always((function(){a.removeClass("install-now updated-message").addClass("activate-now button-primary").text(tf_admin_params.activating),a.unbind(e),a[0].click()}))})),t(document).on("click",".tf-pro",(function(t){t.preventDefault(),window.open("https://tourfic.com/")})),t(window).on("load",(function(){t(".tf-field-disable").find("input, select, textarea, button, div, span").attr("disabled","disabled")})),t(document).on("click",".tf-field-pro",(function(t){t.preventDefault(),window.open("https://tourfic.com/")})),t(document).on("click",".room-repeater > div.csf-fieldset > a.csf-repeater-add",(function(e){var a=t('.room-repeater .csf-repeater-wrapper [data-depend-id="room"]').length-2;t(".room-repeater .unique-id input").each((function(){a++,0===t('.room-repeater [data-depend-id="room"] [data-depend-id="unique_id"]').val().length&&t('.room-repeater [name="tf_hotel[room]['+a+'][unique_id]"]').val((new Date).valueOf()+a)}))}))})),(()=>{const{select:t,dispatch:e}=wp.data;function a(){let a=!1;tf_params.error=!1,tf_params.messages=[];let i=Object.assign({},t("core/editor").getCurrentPost(),t("core/editor").getPostEdits());i.hasOwnProperty("categories")&&(i.categories=i.categories.filter((function(t){return 1!==t}))),jQuery.each(tf_params.taxonomies,(function(t,n){i.hasOwnProperty(t)&&0===i[t].length?(e("core/notices").createNotice("error",n.message,{id:"tfNotice_"+t,isDismissible:!1}),tf_params.error=a=!0):e("core/notices").removeNotice("tfNotice_"+t)})),!0===a?e("core/editor").lockPostSaving():e("core/editor").unlockPostSaving()}a(),setInterval(a,500)})(),jQuery((function(t){const e=new Notyf({ripple:!0,dismissable:!0,duration:3e3,position:{x:"right",y:"bottom"}});function a(a){return tf_params.error=!1,t.each(tf_params.taxonomies,(function(a,i){"hierarchical"==i.type?0==t("#taxonomy-"+a+" input:checked").length&&(e.error(i.message),tf_params.error=!0):t("#tagsdiv-"+a+" .tagchecklist").is(":empty")&&(e.error(i.message),tf_params.error=!0)})),!tf_params.error||(a.stopImmediatePropagation(),!1)}if(t("#publish, #save-post").on("click.require-post-category",a),t("#post").on("submit.require-post-category",a),null!=t("#publish")[0]&&null!=t._data(t("#publish")[0],"events")){var i=t._data(t("#publish")[0],"events").click;i&&i.length>1&&i.unshift(i.pop())}if(null!=t("#save-post")[0]&&null!=t._data(t("#save-post")[0],"events")){var n=t._data(t("#save-post")[0],"events").click;n&&n.length>1&&n.unshift(n.pop())}if(null!=t("#post")[0]&&null!=t._data(t("#post")[0],"events")){var o=t._data(t("#post")[0],"events").submit;o&&o.length>1&&o.unshift(o.pop())}})),function(t){t(document).ready((function(){t(document).on("click",".tf-setup-start-btn",(function(e){e.preventDefault(),t(".tf-welcome-step").hide(),t(".tf-setup-step-1").show()})),t(document).on("click",".tf-setup-next-btn, .tf-setup-skip-btn",(function(e){e.preventDefault();let a=t("#tf-setup-wizard-form"),i=a.find('input[name="tf-skip-steps"]').val(),n=t(this).closest(".tf-setup-step-container").data("step"),o=n+1;if(1===n&&t(this).hasClass("tf-setup-next-btn")){if(!t('input[name="tf-services[]"]:checked').length)return alert(tf_setup_wizard.i18n.no_services_selected),!1;t('input[name="tf-services[]"][value="hotel"]').is(":checked")?t(".tf-hotel-setup-wizard").show():t(".tf-hotel-setup-wizard").hide(),t('input[name="tf-services[]"][value="tour"]').is(":checked")?t(".tf-tour-setup-wizard").show():t(".tf-tour-setup-wizard").hide()}t(this).hasClass("tf-setup-skip-btn")&&(i=i?-1===i.indexOf(n)?i+","+n:i:n,a.find('input[name="tf-skip-steps"]').val(i),1===n&&(t(".tf-hotel-setup-wizard").show(),t(".tf-tour-setup-wizard").show())),t(this).hasClass("tf-setup-next-btn")&&-1!==i.indexOf(n)&&(i=i.replace(n,""),a.find('input[name="tf-skip-steps"]').val(i)),t(this).hasClass("tf-setup-submit-btn")||t(".tf-setup-step-"+n).fadeOut(300,(function(){t(".tf-setup-step-"+o).fadeIn(300)}))})),t(document).on("click",".tf-setup-prev-btn",(function(e){e.preventDefault();let a=t(this).closest(".tf-setup-step-container").data("step"),i=a-1;t(".tf-setup-step-"+a).fadeOut(300,(function(){t(".tf-setup-step-"+i).fadeIn(300)}))})),t(document).on("click",".tf-setup-submit-btn",(function(e){e.preventDefault();let a=t(".tf-setup-submit-btn.tf-admin-btn"),i=t(this).closest("#tf-setup-wizard-form"),n=t(this).closest(".tf-setup-step-container").data("step"),o=i.find('input[name="tf-skip-steps"]').val();t(this).hasClass("tf-admin-btn")&&-1!==o.indexOf(n)&&(o=o.replace(n,""),i.find('input[name="tf-skip-steps"]').val(o));let r=new FormData(i[0]);r.append("action","tf_setup_wizard_submit"),t.ajax({url:tf_setup_wizard.ajaxurl,type:"POST",data:r,processData:!1,contentType:!1,beforeSend:function(){a.addClass("tf-btn-loading")},success:function(t){let e=JSON.parse(t);a.removeClass("tf-btn-loading"),e.success&&(window.location.href=e.redirect_url)},error:function(t){a.removeClass("tf-btn-loading"),console.log(t)}})}))}))}(jQuery),function(t){"use strict";t(document).ready((function(){const e=new Notyf({ripple:!0,duration:3e3,dismissable:!0,position:{x:"right",y:"bottom"}});t(window).on("hashchange load",(function(){let e=window.location.hash,a=window.location.search,i=e.replace("#tab=","");if(e){let e=t('.tf-tablinks[data-tab="'+i+'"]'),a=e.closest(".tf-admin-tab-item");e.trigger("click"),a.trigger("click")}a.indexOf("dashboard")>-1&&t("#toplevel_page_tf_settings").find(".wp-submenu").find("a").filter((function(t,e){return e.href.indexOf(a)>-1})).parent().addClass("current")})),t(document).on("click",".tf-tablinks",(function(e){e.preventDefault();let a,i=t(this),n=i.closest(".tf-admin-tab-item"),o=n.children(".tf-tablinks").attr("data-tab"),r=t(".tf-tab-content"),s=t(".tf-tablinks");r.hide(),s.removeClass("active");let l=i.attr("data-tab");t("#"+l).css("display","flex"),i.next().hasClass("tf-submenu")&&(a=n.find(".tf-submenu li:first-child .tf-tablinks").data("tab")),a===l?n.find(".tf-submenu li:first-child .tf-tablinks").addClass("active"):i.addClass("active"),window.location.hash="#tab="+l,t(".tf-admin-tab").removeClass("active"),t("#toplevel_page_tf_settings").find(".wp-submenu").find("a").filter((function(t,e){let a=e.hash.replace("#tab=","");return l===a||o===a})).parent().addClass("current").siblings().removeClass("current")})),t(document).on("click",".tf-admin-tab-item",(function(e){e.preventDefault();let a=t(this);a.addClass("open"),a.children("ul").slideDown(),a.siblings(".tf-admin-tab-item").children("ul").slideUp(),a.siblings(".tf-admin-tab-item").removeClass("open"),a.siblings(".tf-admin-tab-item").find("li").removeClass("open"),a.siblings(".tf-admin-tab-item").find("ul").slideUp()}));const a=e=>{t(e).each((function(){let e=t(this),a=e.find("input.flatpickr"),i=a.data("format"),n=a.data("multiple");if(2===a.length){let t=e.find(".tf-date-from input.flatpickr").flatpickr({dateFormat:i,onChange:function(t,e,i){a.set("minDate",e)}}),a=e.find(".tf-date-to input.flatpickr").flatpickr({dateFormat:i,onChange:function(e,a,i){t.set("maxDate",a)}})}else a.flatpickr({dateFormat:i,mode:n?"multiple":"single"})}))};a(".tf-field-date");const i=e=>{t(e).each((function(){let e=t(this).find("input.flatpickr"),a=e.data("format");e.flatpickr({enableTime:!0,noCalendar:!0,dateFormat:a})}))};i(".tf-field-time");const n=e=>{t(e).each((function(){t(this).find("input.tf-color").wpColorPicker()}))};function o(){t(".tf-tab-content, .tf-taxonomy-metabox").each((function(){var e=t(this);e.find("[data-controller]").each((function(){var a=t(this);if(a.length){var i=t.tf_deps.createRuleset(),n=t.tf_deps.createRuleset(),o=[],r=[];a.each((function(){var a=t(this),n=a.data("controller").split("|"),s=a.data("condition").split("|"),l=a.data("value").toString().split("|"),c=!!a.data("depend-global"),d=i;t.each(n,(function(t,i){var n=l[t]||"",p=s[t]||s[0];(d=d.createRule(e.find('[data-depend-id="'+i+'"]'),p,n)).include(a),c?r.push(i):o.push(i)}))})),o.length&&t.tf_deps.enable(e,i,o),r.length&&t.tf_deps.enable(TF.vars.$body,n,r)}}))}))}n(".tf-field-color"),o(),t(document).on("click",".tf-modal-btn",(function(e){e.preventDefault(),t(this);let a=t("#tf-icon-modal");a.length>0&&a.hasClass("tf-modal-show")?(a.removeClass("tf-modal-show"),t("body").removeClass("tf-modal-open")):(a.addClass("tf-modal-show"),t("body").addClass("tf-modal-open"))})),t(document).on("click",".tf-modal-close",(function(){t(".tf-modal").removeClass("tf-modal-show"),t("body").removeClass("tf-modal-open")})),t(document).on("click",(function(e){t(e.target).closest(".tf-modal-content,.tf-modal-btn").length||(t("body").removeClass("tf-modal-open"),t(".tf-modal").removeClass("tf-modal-show"))})),t(document).on("click",".tf-icon-tab",(function(e){e.preventDefault();let a=t(this),i=a.data("tab");t(".tf-icon-tab").removeClass("active"),a.addClass("active"),t("#"+i).addClass("active").siblings().removeClass("active")})),t(document).on("click",".tf-icon-select .tf-admin-btn, .tf-icon-select .tf-icon-preview",(function(e){e.preventDefault();let a=t(this).closest(".tf-icon-select").attr("id");t("#tf-icon-modal").data("icon-field",a)})),t(document).on("click",".tf-icon-list li",(function(e){e.preventDefault();let a=t(this);t(".tf-icon-list li").removeClass("active"),a.addClass("active"),t(".tf-icon-insert").removeClass("disabled")})),t(document).on("click",".tf-icon-insert",(function(e){e.preventDefault(),t(this);let a=t("#tf-icon-modal").data("icon-field"),i=t("#"+a),n=i.find(".tf-icon-preview"),o=t(".tf-icon-list li.active").data("icon");o&&(n.removeClass("tf-hide"),i.find(".tf-icon-preview-wrap i").attr("class",o),i.find(".tf-icon-value").val(o).trigger("change"),t(".tf-modal").removeClass("tf-modal-show"),t("body").removeClass("tf-modal-open"))})),t(document).on("change keyup",".tf-icon-search-input",(function(){let e=t(this).val();t("#tf-icon-modal").find(".tf-icon-list li").each((function(){var a=t(this);a.data("icon").search(new RegExp(e,"i"))<0?a.hide():a.show()}))})),t(document).on("click",".tf-icon-preview .remove-icon",(function(e){e.preventDefault();let a=t(this),i=a.closest(".tf-icon-preview"),n=a.closest(".tf-icon-select"),o=t("#tf-icon-modal").find(".tf-icon-list li");i.addClass("tf-hide"),n.find(".tf-icon-preview-wrap i").attr("class",""),n.find(".tf-icon-value").val("").trigger("change"),o.removeClass("active")})),t(document).on("submit",".tf-option-form.tf-ajax-save",(function(a){a.preventDefault();let i=t(this).find(".tf-submit-btn"),n=new FormData(this);var o=t(".itinerary-fonts-file").prop("files");if(void 0!==o)for(var r=0;r<o.length;r++)n.append("file[]",o[r]);n.append("action","tf_options_save"),t.ajax({url:tf_options.ajax_url,type:"POST",data:n,processData:!1,contentType:!1,beforeSend:function(){i.addClass("tf-btn-loading")},success:function(t){let a=JSON.parse(t);"success"===a.status?e.success(a.message):e.error(a.message),i.removeClass("tf-btn-loading")},error:function(t){console.log(t)}})}));const r=e=>{let a=e,i=a.attr("id"),n=a.data("placeholder");t("#"+i).select2({placeholder:n,allowClear:!0})};function s(t){wp.editor.initialize(t,{tinymce:{wpautop:!0,plugins:"charmap colorpicker hr lists paste tabfocus textcolor fullscreen wordpress wpautoresize wpeditimage wpemoji wpgallery wplink wptextpattern",toolbar1:"formatselect,bold,italic,bullist,numlist,blockquote,alignleft,aligncenter,alignright,link,wp_more,spellchecker,fullscreen,wp_adv,listbuttons",toolbar2:"styleselect,strikethrough,hr,forecolor,pastetext,removeformat,charmap,outdent,indent,undo,redo,wp_help"},quicktags:{buttons:"strong,em,link,block,del,ins,img,ul,ol,li,code,more,close"},mediaButtons:!1})}t("select.tf-select2").each((function(){var e=t(this);r(e)})),t("textarea.wp_editor").each((function(){s(t(this).attr("id"))})),t(document).on("click",".tf-repeater-icon-add",(function(){var e=t(this).parent().parent(),l=t(this).attr("data-repeater-id"),c=t(this).attr("data-repeater-max"),d=e.find(".tf-single-repeater-clone-"+l+" .tf-single-repeater-"+l).clone(),p=e.find(".tf-repeater-wrap-"+l+" .tf-single-repeater-"+l).length,f=d.find(':input[name="tf_parent_field"]').val(),u=d.find(':input[name="tf_current_field"]').val();if(e.find(".tf-repeater-wrap .tf-field-notice-inner").remove(),""!=c&&p>=c)return e.find(".tf-repeater-wrap").append('<div class="tf-field-notice-inner tf-notice-danger" style="display: block;">You have reached limit in free version. Please subscribe to Pro for unlimited access</div>'),!1;d.find(':input[name="tf_repeater_count"]').val(p),void 0!==d.find(".unique-id input")&&d.find(".unique-id input").val((new Date).valueOf()+p);let h=d.find(".tf-field-date");h.length>0&&a(h);let m=d.find(".tf-field-time");m.length>0&&i(m);let v=d.find(".tf-field-color");if(v.length>0&&n(v),""==f){if(d.find(":input").each((function(){this.name=this.name.replace("_____","").replace("["+u+"][00]","["+u+"]["+p+"]"),this.id=this.id.replace("_____","").replace("["+u+"][00]","["+u+"]["+p+"]")})),void 0!==(g=d.find('.tf-repeater input[name="tf_parent_field"]').val()))var g=g.replace("["+u+"][00]","["+u+"]["+p+"]");d.find('.tf-repeater input[name="tf_parent_field"]').val(g)}else g=d.find(':input[name="tf_parent_field"]').val(),d.find(":input").each((function(){this.name=this.name.replace("_____","").replace("["+u+"][00]","["+u+"]["+p+"]"),this.id=this.id.replace("_____","").replace("["+u+"][00]","["+u+"]["+p+"]")}));d.find("label").each((function(){var e=t(this).attr("for");void 0!==e&&(e=e.replace("_____","").replace("["+u+"][00]","["+u+"]["+p+"]"),t(this).attr("for",e))})),d.find(".tf-icon-select").each((function(e){var a=t(this).attr("id");void 0!==a&&(a=a+e+p,t(this).attr("id",a))})),d.find("[data-depend-id]").each((function(){var e=t(this).attr("data-depend-id");void 0!==e&&(e=e.replace("["+u+"][00]","["+u+"]["+p+"]"),t(this).attr("data-depend-id",e))})),d.find("[data-controller]").each((function(){var e=t(this).attr("data-controller");void 0!==e&&(e=e.replace("["+u+"][00]","["+u+"]["+p+"]"),t(this).attr("data-controller",e))})),d.find(".wp-editor-wrap").each((function(){var e=t(this).find(".tf_wp_editor").show(),a=t("#"+e.attr("id")).val();if(a&&void 0!==a)var i=tinymce.get(e.attr("id")).getContent();else i="";e.val(i),t(this).closest(".tf-field-textarea").append(e),t(this).remove()}));var _=e.find(".tf-repeater-wrap-"+l);d.appendTo(_).show(),d.find("textarea.parent_wp_editor").each((function(){var e=Math.random().toString(36).substring(3,9)+1;this.id=this.id.replace(u+"__00",u+"__"+e),s(t(this).attr("id"))})),d.find("select.tf-select2-parent").each((function(){this.id=this.id.replace(u+"__00",u+"__"+p),t(this).attr("id");var e=t(this);r(e)})),o()})),t(document).on("click",".tf-repeater-icon-delete",(function(){t(this).attr("data-repeater-max");var e=t(this).closest(".tf-repeater-wrap");return e.find(".tf-single-repeater").length,confirm("Are you sure to delete this item?")&&(e.find(".tf-field-notice-inner").remove(),t(this).closest(".tf-single-repeater").remove()),!1})),t(document).on("click",".tf-repeater-icon-clone",(function(){var e=t(this).closest(".tf-repeater-wrap");let l=t(this).closest(".tf-single-repeater").clone();var c=t(this).attr("data-repeater-max"),d=l.find('input[name="tf_parent_field"]').val(),p=l.find('input[name="tf_current_field"]').val(),f=l.find('input[name="tf_repeater_count"]').val(),u=e.find(".tf-single-repeater-"+p).length;if(e.find(".tf-field-notice-inner").remove(),""!=c&&u>=c)return e.append('<div class="tf-field-notice-inner tf-notice-danger" style="display: block;">You have reached limit in free version. Please subscribe to Pro for unlimited access</div>'),!1;void 0!==l.find(".unique-id input")&&l.find(".unique-id input").val((new Date).valueOf()+u);let h=l.find(".tf-field-date");h.length>0&&a(h);let m=l.find(".tf-field-time");m.length>0&&i(m);let v=l.find(".tf-field-color");if(v.length>0&&n(v),""==d){if(l.find(":input").each((function(){this.name=this.name.replace("_____","").replace("["+p+"]["+f+"]","["+p+"]["+u+"]"),this.id=this.id.replace("_____","").replace("["+p+"]["+f+"]","["+p+"]["+u+"]")})),void 0!==(g=l.find('.tf-repeater input[name="tf_parent_field"]').val()))var g=g.replace("["+p+"]["+f+"]","["+p+"]["+u+"]");l.find('.tf-repeater input[name="tf_parent_field"]').val(g)}else l.find(":input").each((function(){this.name=this.name.replace("_____","").replace("["+p+"]["+f+"]","["+p+"]["+u+"]"),this.id=this.id.replace("_____","").replace("["+p+"]["+f+"]","["+p+"]["+u+"]")}));l.find("label").each((function(){if(void 0!==(e=t(this).attr("for"))){e=e.replace("_____","").replace("["+p+"]["+f+"]","["+p+"]["+u+"]");var e=t(this).attr("for",e)}})),l.find(".tf-icon-select").each((function(e){var a=t(this).attr("id");void 0!==a&&(a=a+e+u,t(this).attr("id",a))})),l.find("[data-depend-id]").each((function(){var e=t(this).attr("data-depend-id");void 0!==e&&(e=e.replace("["+p+"]["+f+"]","["+p+"]["+u+"]"),t(this).attr("data-depend-id",e))})),l.find("[data-controller]").each((function(){var e=t(this).attr("data-controller");void 0!==e&&(e=e.replace("["+p+"]["+f+"]","["+p+"]["+u+"]"),t(this).attr("data-controller",e))})),l.find('input[name="tf_repeater_count"]').val(u),l.find(".wp-editor-wrap").each((function(){var e=t(this).find(".tf_wp_editor").show(),a=t("#"+e.attr("id")).val();if(a&&void 0!==a)var i=tinymce.get(e.attr("id")).getContent();else i="";e.val(i),t(this).closest(".tf-field-textarea").append(e),t(this).remove()})),l.find(".tf-field-select2").each((function(){var e=t(this).find("select.tf-select-two").select2("val");t(this).find("select.tf-select-two").removeAttr("data-select2-id aria-hidden tabindex"),t(this).find("select.tf-select-two option").removeAttr("data-select2-id"),t(this).find("select.tf-select-two").removeClass("select2-hidden-accessible");var a=t(this).find("select.tf-select-two").show();a.val(e),t(this).find(".tf-fieldset").append(a),t(this).find("span.select2-container").remove()})),t(this).closest(".tf-repeater-wrap").append(l).show(),l.find("textarea.parent_wp_editor, textarea.wp_editor").each((function(){var e=Math.random().toString(36).substring(3,9)+1;this.id=this.id.replace(p+"__"+f,p+"__"+e),s(t(this).attr("id"))})),l.find("select.tf-select2-parent, select.tf-select2").each((function(){this.id=this.id.replace(p+"__"+f,p+"__"+u);var e=t(this);r(e)})),o()})),t(document).on("click",".tf-repeater-title, .tf-repeater-icon-collapse",(function(){var e=t(this).closest(".tf-single-repeater").find("input[name=tf_current_field]").val();t(this).closest(".tf-single-repeater-"+e).find(".tf-repeater-content-wrap").slideToggle(),t(this).closest(".tf-single-repeater-"+e).children(".tf-repeater-content-wrap").toggleClass("hide"),1==t(this).closest(".tf-single-repeater-"+e).children(".tf-repeater-content-wrap").hasClass("hide")?t(this).closest(".tf-single-repeater-"+e+" .tf-repeater-header").children(".tf-repeater-icon-collapse").html('<i class="fa-solid fa-angle-down"></i>'):t(this).closest(".tf-single-repeater-"+e+" .tf-repeater-header").children(".tf-repeater-icon-collapse").html('<i class="fa-solid fa-angle-up"></i>')})),t(".tf-repeater-wrap").sortable({handle:".tf-repeater-icon-move",start:function(e,a){t(a.item).find(".tf_wp_editor").attr("id")},stop:function(e,a){t(a.item).find(".tf_wp_editor").each((function(){var e=t(this).attr("id");tinyMCE.execCommand("mceRemoveEditor",!1,e),tinyMCE.execCommand("mceAddEditor",!1,e)}))}}),t(document).on("click",".tf-tab-item",(function(){var e=t(this),a=e.data("tab-id");1==e.parent().parent().find(".tf-tab-item-content").hasClass("show")&&e.parent().parent().find(".tf-tab-item-content").removeClass("show"),e.parent().find(".tf-tab-item").removeClass("show"),e.addClass("show"),e.parent().parent().find(".tf-tab-item-content[data-tab-id = "+a+"]").addClass("show")}))}))}(jQuery),function(t){t(document).on("click",".tf-image-close",(function(e){e.preventDefault(),$this=t(this),t(this).attr("tf-field-name").replace(/[.[\]_-]/g,"_"),$this.parent().parent().find("input").val(""),$this.parent().html("")})),t(document).on("click",".tf-gallery-remove",(function(e){e.preventDefault(),$this=t(this),t(this).attr("tf-field-name").replace(/[.[\]_-]/g,"_"),$this.parent().parent().find("input").val(""),$this.parent().parent().find(".tf-fieldset-gallery-preview").html(""),t("a.tf-gallery-edit, a.tf-gallery-remove").css("display","none")})),t(document).ready((function(){t("body").on("click",".tf-media-upload",(function(a){var i=t(this),n=t(this).attr("tf-field-name");return n.replace(/[.[\]_-]/g,"_"),(e=wp.media({title:"Select Image",button:{text:"Insert Image"},multiple:!1})).on("select",(function(){var t=e.state().get("selection").first().toJSON();i.parent().parent().find("input").val(t.url),i.parent().parent().find(".tf-fieldset-media-preview").html(`<div class="tf-image-close" tf-field-name='${n}'>✖</div><img src='${t.url}' />`)})),e.open(),!1})),t("body").on("click",".tf-gallery-upload, .tf-gallery-edit",(function(e){var n=t(this);return t(this).attr("tf-field-name").replace(/[.[\]_-]/g,"_"),(a=wp.media({title:"Select Gallery",button:{text:"Insert Gallery"},multiple:"add"})).on("open",(function(){var t=a.state().get("selection"),e=n.parent().parent().find("input").val();e.length>0&&e.split(",").forEach((function(e){attachment=wp.media.attachment(e),attachment.fetch(),t.add(attachment?[attachment]:[])}))})),a.on("select",(function(){var t=[],e=[],o=a.state().get("selection").toJSON();for(i in n.parent().parent().find(".tf-fieldset-gallery-preview").html(""),o){var r=o[i];t.push(r.id),e.push(r.url),n.parent().parent().find(".tf-fieldset-gallery-preview").append(`<img src='${r.url}' />`)}n.parent().parent().find("input").val(t.join(",")),n.parent().find("a.tf-gallery-edit, a.tf-gallery-remove").css("display","inline-block")})),a.open(),!1})),t("#addtag > .submit #submit").click((function(){t(".tf-fieldset-media-preview").html("")})),t(document).on("change",".tf-switch",(function(e){t(this),this.checked?t(this).val(1):t(this).val("")})),"googlemap"!=tf_options.gmaps&&t(".tf-field-map").each((function(){var e=t(this),a=e.find(".tf--map-osm"),i=e.find(".tf--map-search input"),n=e.find(".tf--latitude"),o=e.find(".tf--longitude"),r=e.find(".tf--zoom"),s=a.data("map"),l=L.map(a.get(0),s);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(l);var c=L.marker(s.center,{draggable:!0}).addTo(l),d=function(t){n.val(t.lat),o.val(t.lng),r.val(l.getZoom())};l.on("click",(function(t){c.setLatLng(t.latlng),d(t.latlng)})),l.on("zoom",(function(){d(c.getLatLng())})),c.on("drag",(function(){d(c.getLatLng())})),i.length||(i=t('[data-depend-id="'+e.find(".tf--address-field").data("address-field")+'"]'));var p={};i.autocomplete({source:function(e,a){var i=e.term;i in p?a(p[i]):t.get("https://nominatim.openstreetmap.org/search",{format:"json",q:i},(function(t){var e;e=t.length?t.map((function(t){return{value:t.display_name,label:t.display_name,lat:t.lat,lon:t.lon}}),"json"):[{value:"no-data",label:"No Results."}],p[i]=e,a(e)}))},select:function(t,e){if("no-data"===e.item.value)return!1;var a=L.latLng(e.item.lat,e.item.lon);l.panTo(a),c.setLatLng(a),d(a)},create:function(e,a){t(this).autocomplete("widget").addClass("tf-map-ui-autocomplate")}});var f=function(){var t=L.latLng(n.val(),o.val());l.panTo(t),c.setLatLng(t)};n.on("change",f),o.on("change",f),setInterval((function(){l.invalidateSize()}),100)})),t(".tf-mobile-tabs").click((function(e){e.preventDefault(),t(".tf-admin-tab").toggleClass("active")})),t(".tf-faq-title").click((function(){var e=t(this);e.hasClass("active")||(t(".tf-faq-desc").slideUp(400),t(".tf-faq-title").removeClass("active")),e.toggleClass("active"),e.next().slideToggle()}))}))}(jQuery),function(t){"use strict";function e(t,e,a){this.init(t,e,a)}function a(){this.rules=[]}t.extend(e.prototype,{init:function(t,e,a){this.controller=t,this.condition=e,this.value=a,this.rules=[],this.controls=[]},evalCondition:function(e,a,i,n,o){if("=="==i)return this.checkBoolean(n)==this.checkBoolean(o);if("!="==i)return this.checkBoolean(n)!=this.checkBoolean(o);if(">="==i)return Number(o)>=Number(n);if("<="==i)return Number(o)<=Number(n);if(">"==i)return Number(o)>Number(n);if("<"==i)return Number(o)<Number(n);if("()"==i)return window[n](e,a,o);if("any"==i){if(t.isArray(o)){for(var r=o.length-1;r>=0;r--)if(-1!==t.inArray(o[r],n.split(",")))return!0}else if(-1!==t.inArray(o,n.split(",")))return!0}else if("not-any"==i)if(t.isArray(o)){for(r=o.length-1;r>=0;r--)if(-1==t.inArray(o[r],n.split(",")))return!0}else if(-1==t.inArray(o,n.split(",")))return!0;return!1},checkBoolean:function(t){switch(t){case!0:case"true":case 1:case"1":t=!0;break;case null:case!1:case"false":case 0:case"0":t=!1}return t},checkCondition:function(t){if(!this.condition)return!0;var e=t.find(this.controller),a=this.getControlValue(t,e);return void 0!==a&&(a=this.normalizeValue(e,this.value,a),this.evalCondition(t,e,this.condition,this.value,a))},normalizeValue:function(t,e,a){return"number"==typeof e?parseFloat(a):a},getControlValue:function(t,e){return e.length>1&&("radio"==e.attr("type")||"checkbox"==e.attr("type"))?e.filter(":checked").map((function(){return this.value})).get():"checkbox"==e.attr("type")||"radio"==e.attr("type")?e.is(":checked"):e.val()},createRule:function(t,a,i){var n=new e(t,a,i);return this.rules.push(n),n},include:function(t){this.controls.push(t)},applyRule:function(e,a){var i;i=void 0===a?this.checkCondition(e):a;var n=t.map(this.controls,(function(t,a){return e.find(t)}));i?(t(n).each((function(){t(this).removeClass("tf-depend-on")})),t(this.rules).each((function(){this.applyRule(e)}))):(t(n).each((function(){t(this).addClass("tf-depend-on")})),t(this.rules).each((function(){this.applyRule(e,!1)})))}}),t.extend(a.prototype,{createRule:function(t,a,i){var n=new e(t,a,i);return this.rules.push(n),n},applyRules:function(e){t(this.rules).each((function(){this.applyRule(e)}))}}),t.tf_deps={createRuleset:function(){return new a},enable:function(t,e,a){return t.on("change keyup",(function(i){var n=i.target.getAttribute("data-depend-id")||i.target.getAttribute("data-sub-depend-id");-1!==a.indexOf(n)&&e.applyRules(t)})),e.applyRules(t),!0}}}(jQuery),function(t){t(document).ready((function(){1==tf_options.tf_chart_enable&&(document.getElementById("tf_months"),document.getElementById("tf_months").getContext("2d"),t("#tf_months"),new Chart("tf_months",{type:"line",data:{labels:["January","February","March","April","May","June","July","August","September","October","November","December"],datasets:[{label:"Completed Booking",borderColor:"#003C79",tension:.1,data:tf_options.tf_complete_order,fill:!1},{label:"Cancelled Booking",borderColor:"red",tension:.1,data:tf_options.tf_cancel_orders,fill:!1}]},options:{layout:{padding:10},legend:{display:!0},title:{display:!0,text:""}}})),t(document).on("change","#tf-month-report",(function(){var e=t(this).val();0!=e&&(t("#tf-report-loader").addClass("show"),t(".tf-order-report").find("iframe").remove(),jQuery.ajax({type:"post",url:tf_options.ajax_url,data:{action:"tf_month_reports",month:e},success:function(e){var a=JSON.parse(e);document.getElementById("tf_months"),document.getElementById("tf_months").getContext("2d"),t("#tf_months"),new Chart("tf_months",{type:"line",data:{labels:a.months_day_number,datasets:[{label:"Completed Booking",borderColor:"#003C79",tension:.1,data:a.tf_complete_orders,fill:!1},{label:"Cancelled Booking",borderColor:"red",tension:.1,data:a.tf_cancel_orders,fill:!1}]},options:{layout:{padding:10},legend:{display:!0},title:{display:!0,text:a.tf_search_month}}}),t("#tf-report-loader").removeClass("show")}}))}))}))}(jQuery),function(t,e){var a={version:302};if("wpColorPickerAlpha"in window&&"version"in window.wpColorPickerAlpha){var i=parseInt(window.wpColorPickerAlpha.version,10);if(!isNaN(i)&&i>=a.version)return}if(!Color.fn.hasOwnProperty("to_s")){Color.fn.to_s=function(t){"hex"===(t=t||"hex")&&this._alpha<1&&(t="rgba");var e="";return"hex"===t?e=this.toString():this.error||(e=this.toCSS(t).replace(/\(\s+/,"(").replace(/\s+\)/,")")),e},window.wpColorPickerAlpha=a;var n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAAHnlligAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHJJREFUeNpi+P///4EDBxiAGMgCCCAGFB5AADGCRBgYDh48CCRZIJS9vT2QBAggFBkmBiSAogxFBiCAoHogAKIKAlBUYTELAiAmEtABEECk20G6BOmuIl0CIMBQ/IEMkO0myiSSraaaBhZcbkUOs0HuBwDplz5uFJ3Z4gAAAABJRU5ErkJggg==";t.widget("a8c.iris",t.a8c.iris,{alphaOptions:{alphaEnabled:!1},_getColor:function(t){return t===e&&(t=this._color),this.alphaOptions.alphaEnabled?(t=t.to_s(this.alphaOptions.alphaColorType),this.alphaOptions.alphaColorWithSpace||(t=t.replace(/\s+/g,"")),t):t.toString()},_create:function(){try{this.alphaOptions=this.element.wpColorPicker("instance").alphaOptions}catch(t){}t.extend({},this.alphaOptions,{alphaEnabled:!1,alphaCustomWidth:130,alphaReset:!1,alphaColorType:"hex",alphaColorWithSpace:!1}),this._super()},_addInputListeners:function(t){var e=this,a=function(a){var i=t.val(),n=new Color(i),o=(i=i.replace(/^(#|(rgb|hsl)a?)/,""),e.alphaOptions.alphaColorType);t.removeClass("iris-error"),n.error?""!==i&&t.addClass("iris-error"):"hex"===o&&"keyup"===a.type&&i.match(/^[0-9a-fA-F]{3}$/)||n.toIEOctoHex()!==e._color.toIEOctoHex()&&e._setOption("color",e._getColor(n))};t.on("change",a).on("keyup",e._debounce(a,100)),e.options.hide&&t.one("focus",(function(){e.show()}))},_initControls:function(){if(this._super(),this.alphaOptions.alphaEnabled){var e=this,a=e.controls.strip.clone(!1,!1),i=a.find(".iris-slider-offset"),n={stripAlpha:a,stripAlphaSlider:i};a.addClass("iris-strip-alpha"),i.addClass("iris-slider-offset-alpha"),a.appendTo(e.picker.find(".iris-picker-inner")),t.each(n,(function(t,a){e.controls[t]=a})),e.controls.stripAlphaSlider.slider({orientation:"vertical",min:0,max:100,step:1,value:parseInt(100*e._color._alpha),slide:function(t,a){e.active="strip",e._color._alpha=parseFloat(a.value/100),e._change.apply(e,arguments)}})}},_dimensions:function(t){if(this._super(t),this.alphaOptions.alphaEnabled){var e,a,i,n,o,r=this,s=r.options,l=r.controls.square,c=r.picker.find(".iris-strip");for(e=Math.round(r.picker.outerWidth(!0)-(s.border?22:0)),a=Math.round(l.outerWidth()),i=Math.round((e-a)/2),n=Math.round(i/2),o=Math.round(a+2*i+2*n);o>e;)i=Math.round(i-2),n=Math.round(n-1),o=Math.round(a+2*i+2*n);l.css("margin","0"),c.width(i).css("margin-left",n+"px")}},_change:function(){var e=this,a=e.active;if(e._super(),e.alphaOptions.alphaEnabled){var i=e.controls,o=parseInt(100*e._color._alpha),r=e._color.toRgb(),s=["rgb("+r.r+","+r.g+","+r.b+") 0%","rgba("+r.r+","+r.g+","+r.b+", 0) 100%"];e.picker.closest(".wp-picker-container").find(".wp-color-result"),e.options.color=e._getColor(),i.stripAlpha.css({background:"linear-gradient(to bottom, "+s.join(", ")+"), url("+n+")"}),a&&i.stripAlphaSlider.slider("value",o),e._color.error||e.element.removeClass("iris-error").val(e.options.color),e.picker.find(".iris-palette-container").on("click.palette",".iris-palette",(function(){var a=t(this).data("color");e.alphaOptions.alphaReset&&(e._color._alpha=1,a=e._getColor()),e._setOption("color",a)}))}},_paintDimension:function(t,e){var a=this,i=!1;a.alphaOptions.alphaEnabled&&"strip"===e&&(i=a._color,a._color=new Color(i.toString()),a.hue=a._color.h()),a._super(t,e),i&&(a._color=i)},_setOption:function(t,e){var a=this;if("color"!==t||!a.alphaOptions.alphaEnabled)return a._super(t,e);e=""+e,newColor=new Color(e).setHSpace(a.options.mode),newColor.error||a._getColor(newColor)===a._getColor()||(a._color=newColor,a.options.color=a._getColor(),a.active="external",a._change())},color:function(t){return!0===t?this._color.clone():t===e?this._getColor():void this.option("color",t)}}),t.widget("wp.wpColorPicker",t.wp.wpColorPicker,{alphaOptions:{alphaEnabled:!1},_getAlphaOptions:function(){var e=this.element,a=e.data("type")||this.options.type,i=e.data("defaultColor")||e.val(),n={alphaEnabled:e.data("alphaEnabled")||!1,alphaCustomWidth:130,alphaReset:!1,alphaColorType:"rgb",alphaColorWithSpace:!1};return n.alphaEnabled&&(n.alphaEnabled=e.is("input")&&"full"===a),n.alphaEnabled?(n.alphaColorWithSpace=i&&i.match(/\s/),t.each(n,(function(t,a){var o=e.data(t)||a;switch(t){case"alphaCustomWidth":o=o?parseInt(o,10):0,o=isNaN(o)?a:o;break;case"alphaColorType":o.match(/^(hex|(rgb|hsl)a?)$/)||(o=i&&i.match(/^#/)?"hex":i&&i.match(/^hsla?/)?"hsl":a);break;default:o=!!o}n[t]=o})),n):n},_create:function(){t.support.iris&&(this.alphaOptions=this._getAlphaOptions(),this._super())},_addListeners:function(){if(!this.alphaOptions.alphaEnabled)return this._super();var e=this,a=e.element,i=e.toggler.is("a");this.alphaOptions.defaultWidth=a.width(),this.alphaOptions.alphaCustomWidth&&a.width(parseInt(this.alphaOptions.defaultWidth+this.alphaOptions.alphaCustomWidth,10)),e.toggler.css({position:"relative","background-image":"url("+n+")"}),i?e.toggler.html('<span class="color-alpha" />'):e.toggler.append('<span class="color-alpha" />'),e.colorAlpha=e.toggler.find("span.color-alpha").css({width:"30px",height:"100%",position:"absolute",top:0,"background-color":a.val()}),"ltr"===e.colorAlpha.css("direction")?e.colorAlpha.css({"border-bottom-left-radius":"2px","border-top-left-radius":"2px",left:0}):e.colorAlpha.css({"border-bottom-right-radius":"2px","border-top-right-radius":"2px",right:0}),a.iris({change:function(t,a){e.colorAlpha.css({"background-color":a.color.to_s(e.alphaOptions.alphaColorType)}),"function"==typeof e.options.change&&e.options.change.call(this,t,a)}}),e.wrap.on("click.wpcolorpicker",(function(t){t.stopPropagation()})),e.toggler.on("click",(function(){e.toggler.hasClass("wp-picker-open")?e.close():e.open()})),a.on("change",(function(n){var o=t(this).val();(a.hasClass("iris-error")||""===o||o.match(/^(#|(rgb|hsl)a?)$/))&&(i&&e.toggler.removeAttr("style"),e.colorAlpha.css("background-color",""),"function"==typeof e.options.clear&&e.options.clear.call(this,n))})),e.button.on("click",(function(n){t(this).hasClass("wp-picker-default")?a.val(e.options.defaultColor).change():t(this).hasClass("wp-picker-clear")&&(a.val(""),i&&e.toggler.removeAttr("style"),e.colorAlpha.css("background-color",""),"function"==typeof e.options.clear&&e.options.clear.call(this,n),a.trigger("change"))}))}})}}(jQuery)})();
(()=>{var t,e,a;(t=jQuery)(document).ready((function(){const e=new Notyf({ripple:!0,dismissable:!0,duration:3e3,position:{x:"right",y:"bottom"}});t(document).on("click",".tf-del-old-review-fields",(function(a){a.preventDefault(),t(this);var n={action:"tf_delete_old_review_fields",deleteAll:t(this).data("delete-all"),_ajax_nonce:tf_admin_params.tf_nonce};t.ajax({type:"post",url:tf_admin_params.ajax_url,data:n,beforeSend:function(t){e.success(tf_admin_params.deleting_old_review_fields)},success:function(t){e.success(t.data)},error:function(t){e.error(t.data)}})})),t(document).on("click",".remove-order-ids",(function(a){a.preventDefault();var n=t(this),o=t("#post_ID").val(),i={action:"tf_remove_room_order_ids",meta_field:n.closest(".tf-repeater-content-wrap").find(".tf-order_id input").attr("name"),post_id:o,_ajax_nonce:tf_admin_params.tf_nonce};t.ajax({type:"post",url:ajaxurl,data:i,beforeSend:function(t){e.success(tf_admin_params.deleting_room_order_ids)},success:function(t){e.success(t.data.message),location.reload()},error:function(t){e.error(t.data)}})})),t(document).on("click",".post-type-tf_tours #publish, .post-type-tf_tours #save-post",(function(a){if(0===t('input[name="tf_tours_opt[location][address]"]').val().length)return a.preventDefault,a.stopImmediatePropagation(),e.error(tf_admin_params.tour_location_required),!1})),t(document).on("click",".post-type-tf_hotel #publish, .post-type-tf_hotel #save-post",(function(a){if(0===t('input[name="tf_hotels_opt[map][address]"]').val().length)return a.preventDefault,a.stopImmediatePropagation(),e.error(tf_admin_params.hotel_location_required),!1})),t(document).on("click",".post-type-tf_apartment #publish, .post-type-tf_apartment #save-post",(function(a){if(0===t('[name="tf_apartment_opt[map][address]"]').val().length)return a.preventDefault,a.stopImmediatePropagation(),e.error(tf_admin_params.apartment_location_required),!1})),t(document).on("click",".tf-install",(function(e){e.preventDefault();var a=t(this),n=a.attr("data-plugin-slug");a.addClass("updating-message").text(tf_admin_params.installing);var o={action:"tf_ajax_install_plugin",_ajax_nonce:tf_admin_params.tf_nonce,slug:n};jQuery.post(tf_admin_params.ajax_url,o,(function(t){a.removeClass("updating-message"),a.addClass("updated-message").text(tf_admin_params.installed),a.attr("href",t.data.activateUrl)})).fail((function(){a.removeClass("updating-message").text(tf_admin_params.install_failed)})).always((function(){a.removeClass("install-now updated-message").addClass("activate-now button-primary").text(tf_admin_params.activating),a.unbind(e),a[0].trigger("click")}))})),t(document).on("click",".tf-pro",(function(t){t.preventDefault(),window.open("https://tourfic.com/")})),t(window).on("load",(function(){t(".tf-field-disable").find("input, select, textarea, button, div, span").attr("disabled","disabled")})),t(document).on("click",".tf-field-pro",(function(t){t.preventDefault(),window.open("https://tourfic.com/")})),t(document).on("click",".room-repeater > div.csf-fieldset > a.csf-repeater-add",(function(e){var a=t('.room-repeater .csf-repeater-wrapper [data-depend-id="room"]').length-2;t(".room-repeater .unique-id input").each((function(){a++,0===t('.room-repeater [data-depend-id="room"] [data-depend-id="unique_id"]').val().length&&t('.room-repeater [name="tf_hotel[room]['+a+'][unique_id]"]').val((new Date).valueOf()+a)}))})),t(".tf-go-docs").parent().attr("target","_blank"),t(".tf-ticket-status").on("click",(function(){if(t(this).is(":checked")){var e=t(this).val();t("#tf-booking-status-loader").addClass("show"),jQuery.ajax({type:"post",url:tf_admin_params.ajax_url,data:{action:"tf_ticket_status_change",_ajax_nonce:tf_admin_params.tf_nonce,status:"check in",order_unique_id:e},success:function(e){t("#tf-booking-status-loader").removeClass("show")}})}else e=t(this).val(),t("#tf-booking-status-loader").addClass("show"),jQuery.ajax({type:"post",url:tf_admin_params.ajax_url,data:{action:"tf_ticket_status_change",_ajax_nonce:tf_admin_params.tf_nonce,status:"",order_unique_id:e},success:function(e){t("#tf-booking-status-loader").removeClass("show")}})})),t(document).on("click",".tf-affiliate-active",(function(a){a.preventDefault();var n=t(this);t.ajax({type:"post",url:tf_admin_params.ajax_url,data:{action:"tf_affiliate_active",nonce:tf_admin_params.tf_nonce},beforeSend:function(t){n.addClass("tf-btn-loading").css({"pointer-events":"none"})},success:function(t){let a=JSON.parse(t);"success"===a.status&&(e.success(a.message),setTimeout((function(){location.reload()}),500)),n.removeClass("tf-btn-loading").css({"pointer-events":"auto"})},error:function(t){n.removeClass("tf-btn-loading").css({"pointer-events":"auto"})},complete:function(t){n.removeClass("tf-btn-loading").css({"pointer-events":"auto"})}})})),t(document).on("click",".tf-affiliate-install",(function(e){e.preventDefault();var a=t(this);t.ajax({type:"post",url:tf_admin_params.ajax_url,data:{action:"tf_affiliate_install",nonce:tf_admin_params.tf_nonce},beforeSend:function(t){a.addClass("tf-btn-loading").css({"pointer-events":"none"})},success:function(t){"success"===JSON.parse(t).status&&location.reload(),a.removeClass("tf-btn-loading").css({"pointer-events":"auto"})},error:function(t){a.removeClass("tf-btn-loading").css({"pointer-events":"auto"})}})})),t(".tf-post-data-duplicate").on("click",(function(e){e.preventDefault();var a=t(this).data("postid"),n=t(this).data("posttype"),o=t(this).data("nonce");t("#wpcontent").append('<div class="tf-duplicator-loader"></div>'),t.ajax({type:"POST",url:tf_admin_params.ajax_url,data:{action:"tf_duplicate_post_data",postID:a,postType:n,security:o},success:function(t){window.location.reload()},error:function(t){console.error("Error duplicating post:",t)}})}))})),function(t){t(document).ready((function(){const e=new Notyf({ripple:!0,duration:3e3,dismissable:!0,position:{x:"right",y:"bottom"}}),a=function(e){t.confirm({icon:"fa fa-check",theme:"modern",title:"Success!",content:e,type:"green",animat6ionSpeed:300,animation:"scale",closeAnimation:"scale",animateFromElement:!1,typeAnimated:!0,boxWidth:"500px",useBootstrap:!1,closeIcon:!0,buttons:{OK:{btnClass:"btn-blue"}}})},n=function(e){t.confirm({icon:"fa fa-times",theme:"modern",title:"Error!",content:e,type:"red",typeAnimated:!0,animationSpeed:300,animation:"scale",closeAnimation:"scale",animateFromElement:!1,boxWidth:"500px",useBootstrap:!1,closeIcon:!0,buttons:{OK:{btnClass:"btn-red"}}})};function o(e){let a=t('[name="tf_tour_time"]');a.empty(),e.length>0?(a.removeAttr("disabled"),a.append('<option value="" selected>Select Time</option>'),t.each(e,(function(t,e){a.append(`<option value="${t}">${e}</option>`)}))):(a.append('<option value="" selected>No Time Available</option>'),a.attr("disabled","disabled"))}t(document).on("change",'[name="tf_hotel_date[from]"], [name="tf_hotel_date[to]"]',(function(a){a.preventDefault();var n=t('[name="tf_hotel_date[from]"]').val(),o=t('[name="tf_hotel_date[to]"]').val();n.length>0&&o.length>0&&jQuery.ajax({type:"post",url:tf_admin_params.ajax_url,data:{action:"tf_check_available_hotel",_nonce:tf_admin_params.tf_nonce,from:n,to:o},beforeSend:function(){t("#tf-backend-hotel-book-btn").attr("disabled","disabled")},success:function(a){if(a.success){var n=t('[name="tf_available_hotels"]');n.empty(),n.append('<option value="">'+tf_admin_params.select_hotel+"</option>"),t.each(a.data.hotels,(function(t,e){n.append('<option value="'+t+'">'+e+"</option>")})),n.select2(),n.val(n.find("option:eq(1)").val()).trigger("change"),t("#tf-backend-hotel-book-btn").removeAttr("disabled"),t('[name="tf_hotel_rooms_number"]').removeAttr("disabled")}else e.error(a.data)},error:function(t){console.log(t)},complete:function(e){t("#tf-backend-hotel-book-btn").removeAttr("disabled")}})})),t(document).on("change",'[name="tf_available_hotels"]',(function(a){a.preventDefault();var n=t('[name="tf_available_hotels"]').val(),o=t('[name="tf_hotel_date[from]"]').val(),i=t('[name="tf_hotel_date[to]"]').val();n.length>0&&jQuery.ajax({type:"post",url:tf_admin_params.ajax_url,data:{action:"tf_check_available_room",_nonce:tf_admin_params.tf_nonce,hotel_id:n,from:o,to:i},beforeSend:function(){t("#tf-backend-hotel-book-btn").attr("disabled","disabled")},success:function(a){if(a.success){var n=t('[name="tf_available_rooms"]'),o=t('[name="tf_hotel_service_type"]');n.removeAttr("disabled"),n.empty(),n.append('<option value="">'+tf_admin_params.select_room+"</option>"),t.each(a.data.rooms,(function(t,e){n.append('<option value="'+t+'">'+e+"</option>")})),n.select2(),n.val(n.find("option:eq(1)").val()).trigger("change"),o.empty(),t.each(a.data.services,(function(t,e){o.append('<option value="'+t+'">'+e+"</option>")})),t("#tf-backend-hotel-book-btn").removeAttr("disabled")}else e.error(a.data)},error:function(t){console.log(t)},complete:function(e){t("#tf-backend-hotel-book-btn").removeAttr("disabled")}})})),t(document).on("change",'[name="tf_available_rooms"]',(function(a){a.preventDefault();let n=t('[name="tf_available_hotels"]').val(),o=t('[name="tf_available_rooms"]').val();var i=t('[name="tf_hotel_date[from]"]').val(),r=t('[name="tf_hotel_date[to]"]').val();o.length>0&&jQuery.ajax({type:"post",url:tf_admin_params.ajax_url,data:{action:"tf_update_room_fields",_nonce:tf_admin_params.tf_nonce,hotel_id:n,room_id:o,from:i,to:r},beforeSend:function(){t("#tf-backend-hotel-book-btn").attr("disabled","disabled")},success:function(a){if(a.success){var n=t('[name="tf_hotel_rooms_number"]');if(n.empty(),a.data.rooms>0){for(var o=1;o<=a.data.rooms;o++)1===o?n.append('<option value="'+o+'" selected>'+o+" Room</option>"):n.append('<option value="'+o+'">'+o+" Rooms</option>");t("#tf-backend-hotel-book-btn").removeAttr("disabled")}else n.append('<option value="" selected>No Room Available</option>'),n.attr("disabled","disabled");t('[name="tf_hotel_adults_number"]').val(a.data.adults).attr("max",a.data.adults*a.data.rooms),t('[name="tf_hotel_children_number"]').val(a.data.children).attr("max",a.data.children*a.data.rooms)}else e.error(a.data)},error:function(e){console.log(e),t("#tf-backend-hotel-book-btn").removeAttr("disabled")}})})),t(document).on("click","#tf-backend-hotel-book-btn",(function(e){e.preventDefault();let o=t(this),i=o.closest("form.tf-backend-hotel-booking"),r=new FormData(i[0]);r.append("action","tf_backend_hotel_booking");let s=["tf_hotel_booked_by","tf_customer_first_name","tf_customer_email","tf_customer_phone","tf_customer_country","tf_customer_address","tf_customer_city","tf_customer_state","tf_customer_zip","tf_hotel_date[from]","tf_hotel_date[to]","tf_available_hotels","tf_available_rooms","tf_hotel_rooms_number","tf_hotel_adults_number","tf_hotel_children_number"];t.ajax({type:"post",url:tf_admin_params.ajax_url,data:r,processData:!1,contentType:!1,beforeSend:function(t){o.addClass("tf-btn-loading")},success:function(t){const e=JSON.parse(t);if(e.success)a(e.message),a(e.message),i[0].reset(),i.find("input").removeClass("error-input"),i.find("select").removeClass("error-input"),i.find("textarea").removeClass("error-input"),i.find("input").closest(".tf-fieldset").find("small.text-danger").remove(),i.find("select").closest(".tf-fieldset").find("small.text-danger").remove(),i.find("textarea").closest(".tf-fieldset").find("small.text-danger").remove();else if(e.message)n(e.message),i.find("input").removeClass("error-input"),i.find("select").removeClass("error-input"),i.find("textarea").removeClass("error-input"),i.find("input").closest(".tf-fieldset").find("small.text-danger").remove(),i.find("select").closest(".tf-fieldset").find("small.text-danger").remove(),i.find("textarea").closest(".tf-fieldset").find("small.text-danger").remove();else for(const t of s){const a=e.fieldErrors[t+"_error"];i.find('[name="'+t+'"]').removeClass("error-input"),"tf_hotel_date[from]"===t?i.find('[name="'+t+'"]').closest(".tf-date-from").find("small.text-danger").remove():"tf_hotel_date[to]"===t?i.find('[name="'+t+'"]').closest(".tf-date-to").find("small.text-danger").remove():i.find('[name="'+t+'"]').closest(".tf-fieldset").find("small.text-danger").remove(),a&&(i.find('[name="'+t+'"]').addClass("error-input"),"tf_hotel_date[from]"===t?i.find('[name="'+t+'"]').closest(".tf-date-from").append('<small class="text-danger">'+a+"</small>"):"tf_hotel_date[to]"===t?i.find('[name="'+t+'"]').closest(".tf-date-to").append('<small class="text-danger">'+a+"</small>"):i.find('[name="'+t+'"]').closest(".tf-fieldset").append('<small class="text-danger">'+a+"</small>"))}o.removeClass("tf-btn-loading")},error:function(t){console.log(t)},complete:function(t){o.removeClass("tf-btn-loading")}})})),t(document).on("change",'[name="tf_available_tours"]',(function(a){a.preventDefault();var n=t('[name="tf_available_tours"]').val();n.length>0&&jQuery.ajax({type:"post",url:tf_admin_params.ajax_url,data:{action:"tf_tour_date_time_update",_nonce:tf_admin_params.tf_nonce,tour_id:n},beforeSend:function(){t("#tf-backend-hotel-book-btn").attr("disabled","disabled")},success:function(a){if(a.success){const e=JSON.parse(a);"1"!==e.custom_avail&&o(e.allowed_times);let n={enableTime:!1,dateFormat:"Y/m/d"};if("fixed"===e.tour_type)n.mode="range",n.defaultDate=[e.departure_date,e.return_date],n.enable=[{from:e.departure_date,to:e.return_date}],n.onReady=function(t,e,a){a.element.value=e.replace(/[a-z]+/g,"-")};else if("continuous"===e.tour_type){if(n.minDate="today",n.disableMobile="true","1"===e.custom_avail&&(n.enable=[],e.cont_custom_date))for(const t of e.cont_custom_date)n.enable.push({from:t.date.from,to:t.date.to});if("1"!==e.custom_avail&&(e.disabled_day||e.disable_range||e.disable_specific)){if(n.disable=[],e.disabled_day&&n.disable.push((function(t){return 8===t.getDay()||e.disabled_day.includes(t.getDay().toString())})),e.disable_range)for(const t of e.disable_range)n.disable.push({from:t.date.from,to:t.date.to});if(e.disable_specific2)for(const t of e.disable_specific2)n.disable.push(t)}}if(n.onChange=function(t,a,n){if("1"===e.custom_avail){let t=e.allowed_times.filter((t=>{let e=Date.parse(a),n=Date.parse(t.date.from),o=Date.parse(t.date.to);return n<=e&&o>=e}));t=t.length>0&&t[0].times?t[0].times:null,o(t)}n.element.value=a.replace(/[a-z]+/g,"-")},t("[name='tf_tour_date']").flatpickr(n),e.tour_extras_array.length>0){let a=t('[name="tf_tour_extras[]"]');a.removeAttr("disabled"),a.empty(),t.each(e.tour_extras_array,(function(t,e){a.append('<option value="'+t+'">'+e+"</option>")})),a.select2()}else{let e=t('[name="tf_tour_extras[]"]');e.empty(),e.attr("disabled","disabled")}t("#tf-backend-hotel-book-btn").removeAttr("disabled")}else e.error(a.data)}})})),t(document).on("click","#tf-backend-tour-book-btn",(function(o){o.preventDefault();let i=t(this),r=i.closest("form.tf-backend-tour-booking"),s=new FormData(r[0]);s.append("action","tf_backend_tour_booking");let l=["tf_tours_booked_by","tf_customer_first_name","tf_customer_email","tf_customer_phone","tf_customer_country","tf_customer_address","tf_customer_city","tf_customer_state","tf_customer_zip","tf_tour_date","tf_available_tours","tf_tour_adults_number","tf_tour_children_number"];t.ajax({type:"post",url:tf_admin_params.ajax_url,data:s,processData:!1,contentType:!1,beforeSend:function(t){i.addClass("tf-btn-loading")},success:function(t){const o=JSON.parse(t);if(o.success)a(o.message),a(o.message),r[0].reset(),r.find("input").removeClass("error-input"),r.find("select").removeClass("error-input"),r.find("textarea").removeClass("error-input"),r.find("input").closest(".tf-fieldset").find("small.text-danger").remove(),r.find("select").closest(".tf-fieldset").find("small.text-danger").remove(),r.find("textarea").closest(".tf-fieldset").find("small.text-danger").remove();else if(n(o.message),o.errors&&o.errors.forEach((function(t){e.error(t)})),r.find("input").removeClass("error-input"),r.find("select").removeClass("error-input"),r.find("textarea").removeClass("error-input"),r.find("input").closest(".tf-fieldset").find("small.text-danger").remove(),r.find("select").closest(".tf-fieldset").find("small.text-danger").remove(),r.find("textarea").closest(".tf-fieldset").find("small.text-danger").remove(),o.fieldErrors)for(const t of l){const e=o.fieldErrors[t+"_error"];r.find('[name="'+t+'"]').removeClass("error-input"),r.find('[name="'+t+'"]').closest(".tf-fieldset").find("small.text-danger").remove(),e&&(r.find('[name="'+t+'"]').addClass("error-input"),r.find('[name="'+t+'"]').closest(".tf-fieldset").append('<small class="text-danger">'+e+"</small>"))}i.removeClass("tf-btn-loading")}})})),t(document).on("change",'[name="tf_apartment_date[from]"], [name="tf_apartment_date[to]"]',(function(a){a.preventDefault();var n=t('[name="tf_apartment_date[from]"]').val(),o=t('[name="tf_apartment_date[to]"]').val(),i=t('[name="tf_available_apartments"]').val();n.length>0&&o.length>0&&jQuery.ajax({type:"post",url:tf_admin_params.ajax_url,data:{action:"tf_check_available_apartment",_nonce:tf_admin_params.tf_nonce,from:n,to:o,apartment_id:i},beforeSend:function(){t("#tf-backend-apartment-book-btn").attr("disabled","disabled")},success:function(a){if(a.success){var n=t('[name="tf_available_apartments"]');n.empty(),n.append('<option value="">Select Apartment</option>'),t.each(a.data.apartments,(function(t,e){n.append('<option value="'+t+'">'+e+"</option>")})),n.val(n.find("option:eq(1)").val()).trigger("change"),t("#tf-backend-apartment-book-btn").removeAttr("disabled")}else e.error(a.data)},error:function(t){console.log(t)},complete:function(e){t("#tf-backend-apartment-book-btn").removeAttr("disabled")}})})),t(document).on("change",'[name="tf_available_apartments"]',(function(a){a.preventDefault();var n=t('[name="tf_available_apartments"]').val(),o=t('[name="tf_apartment_date[from]"]').val(),i=t('[name="tf_apartment_date[to]"]').val();n.length>0&&jQuery.ajax({type:"post",url:tf_admin_params.ajax_url,data:{action:"tf_check_apartment_aditional_fees",_nonce:tf_admin_params.tf_nonce,apartment_id:n,from:o,to:i},beforeSend:function(){t("#tf-backend-apartment-book-btn").attr("disabled","disabled")},success:function(a){if(a.success){var n=t('[name="tf_apartment_additional_fees"]');n.select2({multiple:!0}),n.empty(),a.data.additional_fees.length>0?t.each(a.data.additional_fees,(function(t,e){n.append('<option value="'+t+'">'+e.label+" - "+e.price+"</option>")})):n.append('<option value="1">There are no additional fees</option>'),n.find("option").prop("selected",!0).trigger("change"),t("#tf-backend-apartment-book-btn").removeAttr("disabled")}else e.error(a.data)},error:function(t){console.log(t)},complete:function(e){t("#tf-backend-apartment-book-btn").removeAttr("disabled")}})})),t(document).on("click","#tf-backend-apartment-book-btn",(function(e){e.preventDefault();let o=t(this),i=o.closest("form.tf-backend-apartment-booking"),r=new FormData(i[0]);r.append("action","tf_backend_apartment_booking");let s=["tf_apartment_booked_by","tf_customer_first_name","tf_customer_email","tf_customer_phone","tf_customer_country","tf_customer_address","tf_customer_city","tf_customer_state","tf_customer_zip","tf_apartment_date[from]","tf_apartment_date[to]","tf_available_apartments","tf_apartment_adults_number","tf_apartment_children_number","tf_apartment_infant_number"];t.ajax({type:"post",url:tf_admin_params.ajax_url,data:r,processData:!1,contentType:!1,beforeSend:function(t){o.addClass("tf-btn-loading")},success:function(t){const e=JSON.parse(t);if(e.success)a(e.message),i[0].reset(),i.find("input").removeClass("error-input"),i.find("select").removeClass("error-input"),i.find("textarea").removeClass("error-input"),i.find("input").closest(".tf-fieldset").find("small.text-danger").remove(),i.find("select").closest(".tf-fieldset").find("small.text-danger").remove(),i.find("textarea").closest(".tf-fieldset").find("small.text-danger").remove();else if(e.message)n(e.message),i.find("input").removeClass("error-input"),i.find("select").removeClass("error-input"),i.find("textarea").removeClass("error-input"),i.find("input").closest(".tf-fieldset").find("small.text-danger").remove(),i.find("select").closest(".tf-fieldset").find("small.text-danger").remove(),i.find("textarea").closest(".tf-fieldset").find("small.text-danger").remove();else for(const t of s){const a=e.fieldErrors[t+"_error"];i.find('[name="'+t+'"]').removeClass("error-input"),"tf_apartment_date[from]"===t?i.find('[name="'+t+'"]').closest(".tf-date-from").find("small.text-danger").remove():"tf_apartment_date[to]"===t?i.find('[name="'+t+'"]').closest(".tf-date-to").find("small.text-danger").remove():i.find('[name="'+t+'"]').closest(".tf-fieldset").find("small.text-danger").remove(),a&&(i.find('[name="'+t+'"]').addClass("error-input"),"tf_apartment_date[from]"===t?i.find('[name="'+t+'"]').closest(".tf-date-from").append('<small class="text-danger">'+a+"</small>"):"tf_apartment_date[to]"===t?i.find('[name="'+t+'"]').closest(".tf-date-to").append('<small class="text-danger">'+a+"</small>"):i.find('[name="'+t+'"]').closest(".tf-fieldset").append('<small class="text-danger">'+a+"</small>"))}o.removeClass("tf-btn-loading")},error:function(t){console.log(t)},complete:function(t){o.removeClass("tf-btn-loading")}})}))}))}(jQuery),(()=>{function t(t){var e=document.getElementById("tf-booking-calendar"),a=window.location.href;t||(t=a.includes("post_type=tf_tours&page=tf_tours_booking")?tf_options.tf_tours_orders:a.includes("post_type=tf_hotel&page=tf_hotel_booking")?tf_options.tf_hotels_orders:a.includes("post_type=tf_apartment&page=tf_apartment_booking")?tf_options.tf_apartments_orders:a.includes("post_type=tf_carrental&page=tf_carrental_booking")?tf_options.tf_cars_orders:[]),new FullCalendar.Calendar(e,{editable:!1,selectable:!0,dayMaxEvents:3,headerToolbar:{left:"prev,next",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},events:t,eventContent:function(t){var e=document.createElement("div");return e.classList.add("tf-booking-single-popup"),e.setAttribute("data-id",t.event.id),e.setAttribute("data-type",t.event.extendedProps.post_type),e.setAttribute("data-page",t.event.extendedProps.page),e.innerHTML=`<span>${t.event.title}</span>`,{domNodes:[e]}}}).render()}!function(e){e(document).ready((function(){const a=new Notyf({ripple:!0,duration:3e3,dismissable:!0,position:{x:"right",y:"bottom"}});e(".tf-filter-selection").on("click",(function(){e(this).toggleClass("active")})),e(".tf-filter-selection ul li").on("click",(function(){let t=e(this).closest(".tf-filter-selection"),a=e(this).text();t.find("label span").text(a)})),e(".tf-order-payment-status, .tf-calendar-order-payment-status").length>0&&e(".tf-order-payment-status, .tf-calendar-order-payment-status").select2({dropdownCssClass:"tf-booking-filter-modal",placeholder:"Order Status",allowClear:!0}),e(".tf-filter-bulk-option").length>0&&e(".tf-filter-bulk-option").select2({dropdownCssClass:"tf-booking-filter-modal",placeholder:"Bulk Action"}),e(".tf-filter-bulk-option-enquiry").length>0&&e(".tf-filter-bulk-option-enquiry").select2({dropdownCssClass:"tf-booking-filter-modal",placeholder:"Bulk Action",minimumResultsForSearch:-1}),e(".tf-enquiry-filter-hotel-name").length>0&&e(".tf-enquiry-filter-hotel-name").select2({dropdownCssClass:"tf-booking-filter-modal",placeholder:"Hotel Name",allowClear:!0}),e(".tf-enquiry-filter-apartment-name").length>0&&e(".tf-enquiry-filter-apartment-name").select2({dropdownCssClass:"tf-booking-filter-modal",placeholder:"Apartment Name",allowClear:!0}),e(".tf-enquiry-filter-tour-name ").length>0&&e(".tf-enquiry-filter-tour-name").select2({dropdownCssClass:"tf-booking-filter-modal",placeholder:"Tours Name",allowClear:!0}),e(".tf-filter-mail-option-enquiry").length>0&&e(".tf-filter-mail-option-enquiry").select2({dropdownCssClass:"tf-booking-filter-modal",placeholder:"Filters",allowClear:!0,minimumResultsForSearch:-1}),e(".tf-post-id-filter-options, .tf-booking-post-id-filter-options").length>0&&e(".tf-post-id-filter-options, .tf-booking-post-id-filter-options").select2({dropdownCssClass:"tf-booking-filter-modal",placeholder:"Tour Name",allowClear:!0}),e(".tf-hotel-id-filter-options, .tf-booking-hotel-id-filter-options").length>0&&e(".tf-hotel-id-filter-options, .tf-booking-hotel-id-filter-options").select2({dropdownCssClass:"tf-booking-filter-modal",placeholder:"Hotel Name",allowClear:!0}),e(".tf-apartment-id-filter-options, .tf-booking-apartment-id-filter-options").length>0&&e(".tf-apartment-id-filter-options, .tf-booking-apartment-id-filter-options").select2({dropdownCssClass:"tf-booking-filter-modal",placeholder:"Apartment Name",allowClear:!0}),e(".tf-car-id-filter-options").length>0&&e(".tf-car-id-filter-options").select2({dropdownCssClass:"tf-booking-filter-modal",placeholder:"Car Name",allowClear:!0}),e(".tf-tour-checkinout-options, .tf-booking-checkinout-options").length>0&&e(".tf-tour-checkinout-options, .tf-booking-checkinout-options").select2({dropdownCssClass:"tf-booking-checkinout-filter-modal",placeholder:"Checked in status",allowClear:!0}),e(document).on("click",".visitor_edit span",(function(t){t.preventDefault(),e(".visitor-details-edit-form").show()})),e(document).on("click",".visitor-details-edit-popup .tf-booking-times span",(function(t){t.preventDefault(),e(".visitor-details-edit-form").hide()})),e(document).on("submit","form.visitor-details-edit-popup",(function(t){t.preventDefault(),e(this);var a=new FormData(this);a.append("action","tf_visitor_details_edit"),a.append("_ajax_nonce",tf_admin_params.tf_nonce),e.ajax({type:"post",url:tf_admin_params.ajax_url,data:a,processData:!1,contentType:!1,beforeSend:function(t){e(".tf-preloader-box").show()},complete:function(t){},success:function(t){location.reload()},error:function(t){console.log(t)}})})),e(".tf-order-checkinout-status ul li").on("click",(function(){let t=e(this).attr("data-value"),a=e(".tf_single_order_id").val();e.ajax({type:"post",url:tf_admin_params.ajax_url,data:{action:"tf_checkinout_details_edit",order_id:a,checkinout:t,_ajax_nonce:tf_admin_params.tf_nonce},beforeSend:function(t){e(".tf-preloader-box").show()},complete:function(t){},success:function(t){location.reload()},error:function(t){console.log(t)}})})),e(".tf-order-ostatus ul li").on("click",(function(){let t=e(this).attr("data-value"),a=e(".tf_single_order_id").val();e.ajax({type:"post",url:tf_admin_params.ajax_url,data:{action:"tf_order_status_edit",order_id:a,status:t,_ajax_nonce:tf_admin_params.tf_nonce},beforeSend:function(t){e(".tf-preloader-box").show()},complete:function(t){},success:function(t){location.reload()},error:function(t){console.log(t)}})})),e(".tf-order-email-resend ul li").on("click",(function(){let t=e(this).attr("data-value"),n=e("#tf_email_order_id").val(),o=e(".tf_single_order_id").val();e.ajax({type:"post",url:tf_admin_params.ajax_url,data:{action:"tf_order_status_email_resend",order_id:n,status:t,id:o,_ajax_nonce:tf_admin_params.tf_nonce},beforeSend:function(t){e(".tf-preloader-box").show()},complete:function(t){},success:function(t){e(".tf-preloader-box").hide(),a.success("Email Sucessfully Resend!")},error:function(t){console.log(t)}})})),e(document).on("click",".tf-voucher-preview .tf-preview-btn a",(function(t){t.preventDefault(),e(".tf-voucher-quick-view-box").css("display","flex")})),e(document).on("click",".tf-voucher-quick-view-box .tf-quick-view-times span",(function(t){t.preventDefault(),e(".tf-voucher-quick-view-box").hide()})),e("#cb #cb-select-all-1").on("click",(function(){e('input[name="order_id[]"]').each((function(){e(this).prop("checked",!e(this).prop("checked"))}))})),e(".tf-order-status-filter-btn").on("click",(function(){let t=[],a=e(".tf-filter-bulk-option").val();e('.tf_booking_details_wrap input[name="order_id[]"]:checked').each((function(){t.push(e(this).val())})),t.length>0&&""!==a&&e.ajax({type:"post",url:tf_admin_params.ajax_url,data:{action:"tf_order_bulk_action_edit",orders:t,status:a,_ajax_nonce:tf_admin_params.tf_nonce},beforeSend:function(t){e(".tf-preloader-box").show()},complete:function(t){},success:function(t){location.reload()},error:function(t){console.log(t)}})})),e(document).on("submit","form.tf-right-search-filter",(function(t){t.preventDefault();let a=e("#tf-searching-key").val();if(""!==a){e(".tf-preloader-box").show();let t=window.location.href,n=t.split("?")[0],o=t.split("?")[1],i=new URLSearchParams(o);if(i.delete("paged"),i.has("post")){i.set("post",a);let t=n.split("?")[0]+"?"+i.toString();window.location.href=t}else{let e=t+"&post="+a;window.location.href=e}}})),e(".tf-tour-checkinout-options").change((function(){let t=e(this).val();e(".tf-preloader-box").show();let a=window.location.href,n=a.split("?")[0],o=a.split("?")[1],i=new URLSearchParams(o);if(i.delete("paged"),i.has("checkinout")){i.set("checkinout",t);let e=n.split("?")[0]+"?"+i.toString();window.location.href=e}else{i.set("checkinout",t);let e=n.split("?")[0]+"?"+i.toString();window.location.href=e}if(!i.has("nonce")){i.set("nonce",tf_admin_params.tf_nonce);let t=n.split("?")[0]+"?"+i.toString();window.location.href=t}})),e(".tf-post-id-filter-options, .tf-hotel-id-filter-options, .tf-apartment-id-filter-options").change((function(){let t=e(this).val();e(".tf-preloader-box").show();let a=window.location.href,n=a.split("?")[0],o=a.split("?")[1],i=new URLSearchParams(o);if(i.delete("paged"),i.has("post")){i.set("post",t);let e=n.split("?")[0]+"?"+i.toString();window.location.href=e}else{i.set("post",t);let e=n.split("?")[0]+"?"+i.toString();window.location.href=e}if(!i.has("nonce")){i.set("nonce",tf_admin_params.tf_nonce);let t=n.split("?")[0]+"?"+i.toString();window.location.href=t}})),e(".tf-order-payment-status").change((function(){let t=e(this).val();e(".tf-preloader-box").show();let a=window.location.href,n=a.split("?")[0],o=a.split("?")[1],i=new URLSearchParams(o);if(i.delete("paged"),i.has("payment")){i.set("payment",t);let e=n.split("?")[0]+"?"+i.toString();window.location.href=e}else{i.set("payment",t);let e=n.split("?")[0]+"?"+i.toString();window.location.href=e}if(!i.has("nonce")){i.set("nonce",tf_admin_params.tf_nonce);let t=n.split("?")[0]+"?"+i.toString();window.location.href=t}})),e(".tf_booking_views_button ul li").on("click",(function(){e(".tf_booking_views_button ul li").removeClass("active");let a=e(this),n=a.attr("data-view");a.addClass("active"),"calendar"==n&&(e(".tf-booking-header-filter").hide(),e(".tf-order-table-responsive").hide(),e("#tf-booking-calendar").css("padding","24px"),e(".tf-calendar-booking-header-filter").css("display","flex"),e("#tf-booking-calendar").show(),t()),"list"==n&&(e("#tf-booking-calendar").hide(),e(".tf-calendar-booking-header-filter").hide(),e(".tf-booking-header-filter").css("display","flex"),e(".tf-order-table-responsive").show())})),e(document).on("click",".tf-booking-calendar-popup-box .tf-popup-header .tf-close",(function(t){e(".tf-booking-calendar-popup-box").hide()})),e(document).on("click",".tf-booking-single-popup",(function(t){t.preventDefault();let a=e(this);e(".tf-calendar-popup-box").html(""),e.ajax({type:"post",url:tf_admin_params.ajax_url,data:{action:"tf_booking_details_popup",id:a.attr("data-id"),type:a.attr("data-type"),page:a.attr("data-page"),_ajax_nonce:tf_admin_params.tf_nonce},beforeSend:function(t){e(".tf-preloader-box").show()},complete:function(t){},success:function(t){e(".tf-calendar-popup-box").html(t),e(".tf-preloader-box").hide(),e(".tf-booking-calendar-popup-box").css("display","flex")},error:function(t){console.log(t)}})})),e(document).on("change",".tf-calendar-order-payment-status, .tf-booking-checkinout-options, .tf-filter-by-post",(function(a){a.preventDefault();let n=e(".tf-calendar-order-payment-status").val(),o=e(".tf-booking-checkinout-options").val(),i=e(".tf-filter-by-post").val();e.ajax({type:"post",url:tf_admin_params.ajax_url,data:{action:"tf_booking_calendar_filter",ostatus:n,checkinout:o,post_id:i,post_type:e("#tf_booking_post_type").val(),_ajax_nonce:tf_admin_params.tf_nonce},beforeSend:function(t){e(".tf-preloader-box").show()},complete:function(t){},success:function(a){let n=JSON.parse(a);e(".tf-preloader-box").hide(),t(n.events)},error:function(t){console.log(t)}})}))}))}(jQuery),document.addEventListener("DOMContentLoaded",(function(){var e,a=document.getElementById("tf-booking-calendar");a&&(a.dataset.set?(t(e),a.style.display="none"):t(e))}))})(),function(t){"use strict";t(document).ready((function(){const e=new Notyf({ripple:!0,duration:3e3,dismissable:!0,position:{x:"right",y:"bottom"}});t(".tf-enquiry-details-wrap .tf-order-status-filter-btn").on("click",(function(a){a.preventDefault();let n=t(this),o=[],i=n.closest(".tf-enquiry-details-wrap").find(".tf-filter-bulk-option-enquiry").val();n.closest(".tf-enquiry-details-wrap").find(".tf-enquiry-filter-hotel-name").val(),n.closest(".tf-enquiry-details-wrap").find(".tf-checkbox-listing #tf-enquiry-name-checkbox:checked").each((function(){o.push(t(this).val())})),t.ajax({url:tf_admin_params.ajax_url,type:"POST",data:{action:"tf_enquiry_bulk_action",selected_items:o,bulk_action:i,_ajax_nonce:tf_admin_params.tf_nonce},beforeSend:function(){n.addClass("loading")},success:function(a){let o=t.parseJSON(a);n.removeClass("loading"),"success"==o.status?e.success(o.msg):"error"==o.status&&e.error(o.msg)}})})),t(".tf-enquiry-filter-hotel-name, .tf-enquiry-filter-tour-name, .tf-enquiry-filter-apartment-name").on("change",(function(){let e=t(this),a=e.val()?e.val():"",n=t(".enquiry-post-type").val(),o=t(".tf-filter-mail-option-enquiry ").val();t.ajax({url:tf_admin_params.ajax_url,type:"POST",data:{action:"tf_enquiry_filter_post",post_id:a,post_type:n,filter:o,_ajax_nonce:tf_admin_params.tf_nonce},beforeSend:function(){t("#tf-enquiry-status-loader").addClass("show")},success:function(e){t("#tf-enquiry-status-loader").removeClass("show"),"error"==e.status?t(".tf-enquiry-details-wrap").append(e.msg):(t(".tf-enquiry-table").remove(),t(".tf-enquiry-details-wrap").append(e))}})})),t(".tf-order-status-filter-reset-btn").on("click",(function(){t(".tf-filter-bulk-option-enquiry").val("").trigger("change"),t(".tf-filter-hotel-name").val("").trigger("change"),t(".tf-filter-mail-option-enquiry").val("").trigger("change")})),t(".tf-filter-mail-option-enquiry").on("change",(function(){let e=t(this),a=e.val()?e.val():"",n=t(".tf-filter-hotel-name ").val(),o=t(".enquiry-post-type").val();t.ajax({url:tf_admin_params.ajax_url,type:"POST",data:{action:"tf_enquiry_filter_mail",filter:a,post_id:n,post_type:o,_ajax_nonce:tf_admin_params.tf_nonce},beforeSend:function(){t("#tf-enquiry-status-loader").addClass("show")},success:function(e){t("#tf-enquiry-status-loader").removeClass("show"),"error"==e.status?t(".tf-enquiry-details-wrap").append(e.msg):(t(".tf-enquiry-table").remove(),t(".tf-enquiry-details-wrap").append(e))}})})),t("#tf-single-enquiry-reply-form").on("submit",(function(a){a.preventDefault();let n=t(this),o=n.find(".tf-enquiry-reply-email").val(),i=tinyMCE.activeEditor&&tinyMCE.activeEditor.getContent()?tinyMCE.activeEditor.getContent():t("#tf-enquiry-reply-editor").val(),r=n.find(".tf-enquiry-reply-name").val(),s=n.find(".tf-enquiry-reply-subject").val(),l=n.find(".tf-enquiry-reply-post-id").val(),f=n.find(".tf-enquiry-reply-id").val();t.ajax({url:tf_admin_params.ajax_url,type:"POST",data:{action:"tf_enquiry_reply_email",reply_mail:o,reply_message:i,user_name:r,subject:s,post_id:l,enquiry_id:f,_ajax_nonce:tf_admin_params.tf_nonce},beforeSend:function(){t("#tf-enquiry-status-loader").addClass("show")},success:function(a){t("#tf-enquiry-status-loader").removeClass("show");let n=JSON.parse(a);"success"==n.status?(e.success(n.msg),window.location.reload()):"error"==n.status&&e.error(n.msg)},error:function(t){console.log(t)}})})),t(document).on("submit","form.tf-enquiry-right-search-filter",(function(a){a.preventDefault();let n=t("#tf-searching-enquiry-key").val(),o=t(".tf-filter-hotel-name option");var i=t.map(o,(function(t){return t.value}));-1!==t.inArray(n,i)?t(".tf-filter-hotel-name").val(n).trigger("change"):e.error(tf_admin_params.no_data_found_with_id)})),t(document).on("click",".tf-single-enquiry-copy-btn",(function(a){let n=t(this).closest(".tf-single-enquiry-details-value").data("enquiry-copy-text"),o=t("<input>"),i=t(this).parent().parent().find(".tf-single-enquiry-log-details-single-value").data("enquiry-copy-text");n=n||i,t("body").append(o),o.val(n).select(),document.execCommand("copy"),o.remove(),e.success("Copied to clipboard")})),t(document).on("click",".tf-single-enquiry-reply-mail-button",(function(e){t(".tf-single-enquiry-reply-wrapper").slideDown(),t(this).hide()})),t(".tf-single-enquiry-reply-another-mail-button").on("click",(function(e){t("#tf-single-enquiry-reply-form").slideDown(),t(this).hide()})),t(".tf-single-enquiry-accordion-item.is-active").children(".tf-single-accordion-body").slideDown(),t(".tf-single-enquiry-accordion-head").on("click",(function(){let e=t(this).parent();e.siblings(".tf-single-enquiry-accordion-item").removeClass("is-active").find(".tf-single-accordion-body").slideUp(),e.toggleClass("is-active").find(".tf-single-accordion-body").slideToggle("ease-out")})),t(".tf-enquiry-single-row").on("click",(function(e){let a=window.location.href,n=t(".tf-enquiry-id",this).val();if("check-column"==t(e.target)[0].className||"tf-enquiry-name-checkbox"==t(e.target)[0].className||"table-name-column"==t(e.target)[0].className)return;let o=a+"&enquiry_id="+n+"&action=preview";window.location.href=o}))}))}(jQuery),(()=>{const{select:t,dispatch:e}=wp.data;function a(){let a=!1;tf_admin_params.error=!1,tf_admin_params.messages=[];let n=Object.assign({},t("core/editor").getCurrentPost(),t("core/editor").getPostEdits());n.hasOwnProperty("categories")&&(n.categories=n.categories.filter((function(t){return 1!==t}))),jQuery.each(tf_admin_params.taxonomies,(function(t,o){n.hasOwnProperty(t)&&0===n[t].length?(e("core/notices").createNotice("error",o.message,{id:"tfNotice_"+t,isDismissible:!1}),tf_admin_params.error=a=!0):e("core/notices").removeNotice("tfNotice_"+t)})),!0===a?e("core/editor").lockPostSaving():e("core/editor").unlockPostSaving()}a(),setInterval(a,500)})(),jQuery((function(t){const e=new Notyf({ripple:!0,dismissable:!0,duration:3e3,position:{x:"right",y:"bottom"}});function a(a){return tf_admin_params.error=!1,t.each(tf_admin_params.taxonomies,(function(a,n){"hierarchical"==n.type?0==t("#taxonomy-"+a+" input:checked").length&&(e.error(n.message),tf_admin_params.error=!0):t("#tagsdiv-"+a+" .tagchecklist").is(":empty")&&(e.error(n.message),tf_admin_params.error=!0)})),!tf_admin_params.error||(a.stopImmediatePropagation(),!1)}if(t("#publish, #save-post").on("click.require-post-category",a),t("#post").on("submit.require-post-category",a),null!=t("#publish")[0]&&null!=t._data(t("#publish")[0],"events")){var n=t._data(t("#publish")[0],"events").click;n&&n.length>1&&n.unshift(n.pop())}if(null!=t("#save-post")[0]&&null!=t._data(t("#save-post")[0],"events")){var o=t._data(t("#save-post")[0],"events").click;o&&o.length>1&&o.unshift(o.pop())}if(null!=t("#post")[0]&&null!=t._data(t("#post")[0],"events")){var i=t._data(t("#post")[0],"events").submit;i&&i.length>1&&i.unshift(i.pop())}})),function(t){t(document).ready((function(){const e=new Notyf({ripple:!0,dismissable:!0,duration:3e3,position:{x:"right",y:"bottom"}});t("body").hasClass("tourfic-settings_page_tf-setup-wizard")&&t("html").css("padding","0"),t(document).on("click",".tf-setup-start-btn",(function(e){e.preventDefault(),t(".tf-welcome-step").hide(),tf_admin_params.is_woo_not_active?t(".tf-setup-step-1").fadeIn(600):t(".tf-setup-step-2").fadeIn(600)})),t(document).on("click",".tf-setup-next-btn, .tf-setup-skip-btn",(function(e){e.preventDefault();let a=t("#tf-setup-wizard-form"),n=a.find('input[name="tf-skip-steps"]').val(),o=t(this).closest(".tf-setup-step-container").data("step"),i=o+1;if(2===o&&t(this).hasClass("tf-setup-next-btn")){if(!t('input[name="tf-services[]"]:checked').length)return alert(tf_admin_params.i18n.no_services_selected),!1;t('input[name="tf-services[]"][value="hotel"]').is(":checked")?(t(".tf-hotel-setup-wizard").show(),t(".tf-add-new-hotel").show()):(t(".tf-hotel-setup-wizard").hide(),t(".tf-add-new-hotel").hide()),t('input[name="tf-services[]"][value="tour"]').is(":checked")?(t(".tf-tour-setup-wizard").show(),t(".tf-add-new-tour").show()):(t(".tf-tour-setup-wizard").hide(),t(".tf-add-new-tour").hide()),t('input[name="tf-services[]"][value="apartment"]').is(":checked")?(t(".tf-apartment-setup-wizard").show(),t(".tf-add-new-apartment").show()):(t(".tf-apartment-setup-wizard").hide(),t(".tf-add-new-apartment").hide()),t('input[name="tf-services[]"][value="carrentals"]').is(":checked")?(t(".tf-car-setup-wizard").show(),t(".tf-add-new-car").show()):(t(".tf-car-setup-wizard").hide(),t(".tf-add-new-car").hide())}t(this).hasClass("tf-setup-skip-btn")&&(n=n?-1===n.indexOf(o)?n+","+o:n:o,a.find('input[name="tf-skip-steps"]').val(n),1===o&&(t(".tf-hotel-setup-wizard").show(),t(".tf-tour-setup-wizard").show())),t(this).hasClass("tf-setup-next-btn")&&-1!==n.indexOf(o)&&(n=n.replace(o,""),a.find('input[name="tf-skip-steps"]').val(n)),t(this).hasClass("tf-setup-submit-btn")||t(".tf-setup-step-"+o).fadeOut(300,(function(){t(".tf-setup-step-"+i).fadeIn(300)}))})),t(document).on("click",".tf-setup-prev-btn",(function(e){e.preventDefault();let a=t(this).closest(".tf-setup-step-container").data("step"),n=a-1;2!==a||tf_admin_params.is_woo_not_active?t(".tf-setup-step-"+a).fadeOut(300,(function(){t(".tf-setup-step-"+n).fadeIn(300)})):t(".tf-setup-step-2").fadeOut(300,(function(){t(".tf-setup-step-0").fadeIn(300)}))})),t(document).on("click",".tf-setup-submit-btn",(function(e){e.preventDefault();let a=t(".tf-setup-submit-btn.tf-quick-setup-btn"),n=t(this).closest("#tf-setup-wizard-form"),o=t(this).closest(".tf-setup-step-container").data("step"),i=n.find('input[name="tf-skip-steps"]').val();t(this).hasClass("tf-quick-setup-btn")&&-1!==i.indexOf(o)&&(i=i.replace(o,""),n.find('input[name="tf-skip-steps"]').val(i));let r=new FormData(n[0]);r.append("action","tf_setup_wizard_submit"),t.ajax({url:tf_admin_params.ajax_url,type:"POST",data:r,processData:!1,contentType:!1,beforeSend:function(){a.addClass("tf-btn-loading")},success:function(e){let n=JSON.parse(e);a.removeClass("tf-btn-loading"),n.success&&(t(".tf-finish-step").show(),t(".tf-setup-step-"+o).hide())},complete:function(){a.removeClass("tf-btn-loading")},error:function(t){a.removeClass("tf-btn-loading"),console.log(t)}})}));let a=tf_admin_params.is_travelfic_toolkit_active;t(document).on("click",".tf-setup-travelfic-theme-btn",(function(e){if(e.preventDefault(),tf_admin_params.current_active_theme&&"travelfic"!=tf_admin_params.current_active_theme&&"ultimate-hotel-booking"!=tf_admin_params.current_active_theme){let e=t('.tf-template-selection input[name="tf_theme_select"]:checked').val();"travelfic"==e&&t(".tf-setup-travelfic-theme-btn").text("Travelfic Installing..."),"ultimate-hotel-booking"==e&&t(".tf-setup-travelfic-theme-btn").text("Hotel Booking Installing..."),t(".tf-setup-travelfic-theme-btn").addClass("tf-btn-loading");var a={action:"tf_theme_installing",_ajax_nonce:tf_admin_params.tf_nonce,slug:e};jQuery.post(tf_admin_params.ajax_url,a,(function(e){t(".tf-setup-travelfic-theme-active").trigger("click")}))}else t(".tf-setup-travelfic-toolkit-btn").trigger("click")})),t(document).on("click",".tf-setup-travelfic-theme-active",(function(e){e.preventDefault();let n=t('.tf-template-selection input[name="tf_theme_select"]:checked').val();"travelfic"==n&&t(".tf-setup-travelfic-theme-btn").text("Travelfic Activate..."),"ultimate-hotel-booking"==n&&t(".tf-setup-travelfic-theme-btn").text("Hotel Booking Activate..."),t.ajax({type:"post",url:tf_admin_params.ajax_url,data:{action:"tf_setup_travelfic_theme_active",_ajax_nonce:tf_admin_params.tf_nonce,slug:n},success:function(e){-1!==t.inArray("travelfic-toolkit",a)?t(".tf-setup-travelfic-toolkit-btn").trigger("click"):window.location.replace(tf_admin_params.toolkit_page_url)},error:function(t){}})})),t(document).on("click",".tf-setup-travelfic-toolkit-btn",(function(e){e.preventDefault();var n=t(this);if(-1!==t.inArray("travelfic-toolkit",a)){let e=t(this).attr("data-install");n.text("Toolkit Activate..."),n.addClass("tf-btn-loading");var o={action:"tf_travelfic_toolkit_installing",_ajax_nonce:tf_admin_params.tf_nonce,slug:e};jQuery.post(tf_admin_params.ajax_url,o,(function(e){t(".tf-setup-travelfic-toolkit-active").trigger("click")}))}else window.location.replace(tf_admin_params.toolkit_page_url)})),t(document).on("click",".tf-setup-travelfic-toolkit-active",(function(e){e.preventDefault();let a=t(this).attr("data-install");t(".tf-setup-travelfic-theme-btn").text("Toolkit Activate..."),t.ajax({type:"post",url:tf_admin_params.ajax_url,data:{action:"tf_travelfic_toolkit_activate",_ajax_nonce:tf_admin_params.tf_nonce,slug:a},success:function(t){window.location.replace(tf_admin_params.toolkit_page_url)},error:function(t){}})})),t(document).on("click",".tf-install-woo-btn",(function(e){e.preventDefault();let a=t(this);t.ajax({type:"post",url:tf_admin_params.ajax_url,data:{action:"tf_ajax_install_woo",_ajax_nonce:tf_admin_params.tf_nonce,slug:"woocommerce"},beforeSend:function(){a.text(tf_admin_params.installing),a.addClass("tf-btn-loading")},success:function(e){a.text(tf_admin_params.activating),t(".tf-active-woo-btn").trigger("click")},error:function(t){console.log(t)}})})),t(document).on("click",".tf-active-woo-btn",(function(a){a.preventDefault();let n=t(this);t.ajax({type:"post",url:tf_admin_params.ajax_url,data:{action:"tf_ajax_activate_woo",_ajax_nonce:tf_admin_params.tf_nonce,slug:"woocommerce"},beforeSend:function(){n.text(tf_admin_params.activating),n.addClass("tf-btn-loading")},success:function(a){e.success(a.data),setTimeout((function(){n.closest(".tf-setup-step-layout").find(".tf-setup-next-btn").trigger("click")}),500),n.removeClass("tf-btn-loading"),t(".tf-install-woo-btn").removeClass("tf-btn-loading")},error:function(t){console.log(t)}})}))}))}(jQuery),function(t){"use strict";t(document).ready((function(){const e=new Notyf({ripple:!0,duration:3e3,dismissable:!0,position:{x:"right",y:"bottom"}});t(window).on("hashchange load",(function(){let e=window.location.hash,a=window.location.search,n=e.replace("#tab=","");if(e){let e=t('.tf-tablinks[data-tab="'+n+'"]'),a=e.closest(".tf-admin-tab-item");e.trigger("click"),a.trigger("click")}a.indexOf("dashboard")>-1&&t("#toplevel_page_tf_settings").find(".wp-submenu").find("a").filter((function(t,e){return e.href.indexOf(a)>-1})).parent().addClass("current"),v(),m()})),t(document).on("click",".tf-tablinks",(function(e){e.preventDefault();let a,n=t(this),o=n.closest(".tf-admin-tab-item"),i=o.children(".tf-tablinks").attr("data-tab"),r=t(".tf-tab-content"),s=t(".tf-tablinks");r.hide(),s.removeClass("active");let l=n.attr("data-tab");t("#"+l).css("display","flex"),n.next().hasClass("tf-submenu")&&(a=o.find(".tf-submenu li:first-child .tf-tablinks").data("tab")),a===l?o.find(".tf-submenu li:first-child .tf-tablinks").addClass("active"):n.addClass("active"),window.location.hash="#tab="+l,t(".tf-admin-tab").removeClass("active"),t("#toplevel_page_tf_settings").find(".wp-submenu").find("a").filter((function(t,e){let a=e.hash.replace("#tab=","");return l===a||i===a})).parent().addClass("current").siblings().removeClass("current"),c()})),t(document).on("click",".tf-admin-tab-item",(function(e){e.preventDefault();let a=t(this);a.addClass("open"),a.children("ul").slideDown(),a.siblings(".tf-admin-tab-item").children("ul").slideUp(),a.siblings(".tf-admin-tab-item").removeClass("open"),a.siblings(".tf-admin-tab-item").find("li").removeClass("open"),a.siblings(".tf-admin-tab-item").find("ul").slideUp()}));const a=e=>{t(e).each((function(){let e=t(this),a=e.find("input.flatpickr"),n=a.data("format"),o=a.data("multiple"),i=a.data("min-date");if(2===a.length){let t=e.find(".tf-date-from input.flatpickr").flatpickr({dateFormat:n,minDate:i,altInput:!0,altFormat:tf_options.tf_admin_date_format,onChange:function(t,e,n){a.set("minDate",e)}}),a=e.find(".tf-date-to input.flatpickr").flatpickr({dateFormat:n,minDate:i,altInput:!0,altFormat:tf_options.tf_admin_date_format,onChange:function(e,a,n){t.set("maxDate",a)}})}else a.flatpickr({dateFormat:n,minDate:i,altInput:!0,altFormat:tf_options.tf_admin_date_format,mode:o?"multiple":"single"})}))};a(".tf-field-date");const n=e=>{t(e).each((function(){let e=t(this).find("input.flatpickr"),a=e.data("format");e.flatpickr({enableTime:!0,noCalendar:!0,dateFormat:a})}))};n(".tf-field-time");const o=e=>{t(e).each((function(){t(this).find("input.tf-color").wpColorPicker()}))};function i(){t(".tf-tab-content, .tf-taxonomy-metabox").each((function(){var e=t(this);e.find("[data-controller]").each((function(){var a=t(this);if(a.length){var n=t.tf_deps.createRuleset(),o=t.tf_deps.createRuleset(),i=[],r=[];a.each((function(){var a=t(this),o=a.data("controller").split("|"),s=a.data("condition").split("|"),l=a.data("value").toString().split("|"),f=!!a.data("depend-global"),d=n;t.each(o,(function(t,n){var o=l[t]||"",c=s[t]||s[0];(d=d.createRule(e.find('[data-depend-id="'+n+'"]'),c,o)).include(a),f?r.push(n):i.push(n)}))})),i.length&&t.tf_deps.enable(e,n,i),r.length&&t.tf_deps.enable(TF.vars.$body,o,r)}}))}))}o(".tf-field-color"),i(),t(document).on("click",".tf-modal-btn",(function(e){e.preventDefault(),t(this);let a=t("#tf-icon-modal");a.length>0&&a.hasClass("tf-modal-show")?(a.removeClass("tf-modal-show"),t("body").removeClass("tf-modal-open")):(a.addClass("tf-modal-show"),t("body").addClass("tf-modal-open"))})),t(document).on("click",".tf-modal-close",(function(){t(".tf-modal").removeClass("tf-modal-show"),t("body").removeClass("tf-modal-open")})),t(document).on("click",(function(e){t(".tf-map-modal").length||t(e.target).closest(".tf-modal-content,.tf-modal-btn").length||(t("body").removeClass("tf-modal-open"),t(".tf-modal").removeClass("tf-modal-show"))})),t(document).on("click",".tf-icon-tab",(function(e){e.preventDefault();let a=t(this),n=a.data("tab");t(".tf-icon-tab").removeClass("active"),a.addClass("active"),t("#"+n).addClass("active").siblings().removeClass("active");let o=t(".tf-icon-search-input").val();l(),s(o)})),t(document).on("click",".tf-icon-select .tf-admin-btn, .tf-icon-select .tf-icon-preview",(function(e){e.preventDefault();let a=t(this).closest(".tf-icon-select").attr("id");t("#tf-icon-modal").data("icon-field",a)})),t(document).on("click",".tf-icon-list li",(function(e){e.preventDefault();let a=t(this);t(".tf-icon-list li").removeClass("active"),a.addClass("active"),t(".tf-icon-insert").removeClass("disabled")})),t(document).on("click",".tf-icon-insert",(function(e){e.preventDefault(),t(this);let a=t("#tf-icon-modal").data("icon-field"),n=t("#"+a),o=n.find(".tf-icon-preview"),i=t(".tf-icon-list li.active").data("icon");i&&(o.removeClass("tf-hide"),n.find(".tf-icon-preview-wrap i").attr("class",i),n.find(".tf-icon-value").val(i).trigger("change"),t(".tf-modal").removeClass("tf-modal-show"),t("body").removeClass("tf-modal-open"))})),t(document).on("click",".tf-icon-preview .remove-icon",(function(e){e.preventDefault();let a=t(this),n=a.closest(".tf-icon-preview"),o=a.closest(".tf-icon-select"),i=t("#tf-icon-modal").find(".tf-icon-list li");n.addClass("tf-hide"),o.find(".tf-icon-preview-wrap i").attr("class",""),o.find(".tf-icon-value").val("").trigger("change"),i.removeClass("active")}));const r=(t,e)=>{let a;return function(){const n=this,o=arguments;clearTimeout(a),a=setTimeout((()=>t.apply(n,o)),e)}};t(document).on("keyup",".tf-icon-search-input",r((function(e){let a=t(this).val();s(a)}),500));const s=a=>{let n=t(".tf-icon-tab-pane.active").data("type"),o=t(".tf-icon-tab-pane.active .tf-icon-list");t.ajax({url:tf_options.ajax_url,type:"POST",data:{action:"tf_icon_search",_nonce:tf_admin_params.tf_nonce,search:a,type:n},beforeSend:function(){o.html('<div class="tf-icon-loading">Loading...</div>')},success:function(a){a.success?(o.html(a.data.html),t(".tf-icon-tab-pane.active").attr("data-max",a.data.count)):e.error(a.data)},error:function(t,e,a){console.error(a)}})},l=()=>{var a=!1,n=100;let o=t(".tf-icon-tab-pane.active .tf-icon-list"),i=0,r=t(".tf-icon-search-input").val();o.on("scroll",(function(){let s=t(".tf-icon-tab-pane.active").data("type"),l=t(".tf-icon-tab-pane.active").data("max");i=o[0].scrollHeight-o.height(),o.scrollTop()>=i&&!a&&n<l&&(a=!0,t.ajax({url:tf_options.ajax_url,type:"POST",data:{action:"tf_load_more_icons",_nonce:tf_admin_params.tf_nonce,start_index:n,type:s,search:r},beforeSend:function(){t(".tf-icon-list").append('<div class="tf-icon-loading">Loading...</div>')},success:function(o){o.success?(a=!1,t("#tf-icon-tab-"+s+" .tf-icon-list").append(o.data),t(".tf-icon-loading").remove(),n+=100):(t(".tf-icon-loading").remove(),e.error(o.data))},error:function(e,n,o){a=!1,console.error(o),t(".tf-icon-loading").remove()}}))}))};l(),t(document).on("click",".tf-setting-save-btn .tf-submit-btn",(function(e){e.preventDefault(),t(".tf-option-form.tf-ajax-save").submit()})),t(document).on("click",".tf-setting-save-btn .tf-reset-btn",(function(a){t.confirm({icon:"fa fa-warning",title:tf_options.swal_reset_title_text,content:tf_options.swal_reset_other_text,type:"red",typeAnimated:!1,boxWidth:"500px",animationSpeed:500,animation:"scale",closeAnimation:"scale",animateFromElement:!1,useBootstrap:!1,theme:"modern",buttons:{confirm:{text:tf_options.swal_reset_btn_text,btnClass:"btn-blue",action:function(){t.ajax({url:tf_options.ajax_url,type:"POST",data:{action:"tf_options_reset",tf_option_nonce:tf_admin_params.tf_nonce},beforeSend:function(){t(".tf-setting-save-btn .tf-reset-btn").addClass("tf-btn-loading")},success:function(a){let n=JSON.parse(a);"success"===n.status?(e.success(n.message),window.location.reload()):e.error(n.message),t(".tf-setting-save-btn .tf-reset-btn").removeClass("tf-btn-loading")},error:function(t,e,a){console.log(a)}}).done((function(){}))}},cancel:{text:tf_options.swal_reset_cancel_btn_text,btnClass:"btn-red"}}})})),t(document).find("#tf-settings-header-search-filed").on("keyup",r((function(){var e=t(this).val().toLowerCase();let a=document.createElement("div");a.classList.add("tf-search-results"),e.length>=3?t.ajax({url:tf_options.ajax_url,type:"POST",data:{action:"tf_search_settings_autocomplete",tf_option_nonce:tf_admin_params.tf_nonce,search:e},success:function(n){let o=JSON.parse(n),i=0,r=document.createElement("ul");if("success"===o.status){if(t.each(o.message,(function(n,o){if(-1!=o.field_title.toLowerCase().indexOf(e)){let t=document.createElement("li"),e=document.createElement("div");e.classList.add("tf-search-result-title");let a=document.createElement("a");a.href=`#tab=${o.parent_id}`;let n=document.createElement("i"),i=document.createElement("p"),s=document.createElement("span");i.innerHTML=o.field_title,s.innerHTML=o.path,n.classList.add(...o.icon.split(" ")),r.classList.add("tf-search-result"),t.setAttribute("data-id",o.id),t.setAttribute("data-tab-id",o.tab_id),a.append(n),e.append(i),e.append(s),a.append(e),t.append(a),r.append(t)}else i=1;t(".tf-search-results").length||e<3?t(".tf-search-results").remove():a.append(r)})),1==i){let t=document.createElement("p");t.classList.add("tf-search-not-found"),t.innerHTML=tf_admin_params.setting_search_no_result,r.append(t)}t(".tf-setting-search").append(a)}else console.log("Something went wrong!")}}):t(".tf-search-results").hide()}),700)),t(document).on("click",(function(e){"tf-settings-header-search-filed"!==e.target.id&&t(".tf-search-results").length&&t(".tf-search-results").hide()})),t("#tf-settings-header-search-filed").on("focus",(function(e){t(".tf-search-results").length&&t(".tf-search-results").show()})),t(document).on("click",".tf-search-result li",(function(e){let a=`label[for='tf_settings\\[${t(this).data("id")}\\]']`,n=t(this).closest("li").data("tab-id");n&&t('.tf-tab-item[data-tab-id="'+n+'"]').trigger("click"),t("html, body").animate({scrollTop:t(document).find(a).closest(".tf-field").offset().top},100)})),t(document).on("submit",".tf-option-form.tf-ajax-save",(function(a){a.preventDefault();let n=t(this),o=n.find(".tf-submit-btn"),i=new FormData(this);var r=t(".itinerary-fonts-file").prop("files");if(void 0!==r)for(var s=0;s<r.length;s++)i.append("file[]",r[s]);let l=!1;if(void 0!==i.get("tf_import_option")&&""!=i.get("tf_import_option").trim()){if(!confirm(tf_options.tf_export_import_msg.import_confirm))return;l=!0}i.append("action","tf_options_save"),t.ajax({url:tf_options.ajax_url,type:"POST",data:i,processData:!1,contentType:!1,beforeSend:function(){1==l&&n.find(".tf-import-btn").addClass("tf-btn-loading"),o.addClass("tf-btn-loading"),t(".tf-setting-save-btn .tf-submit-btn").addClass("tf-btn-loading")},success:function(a){let i=JSON.parse(a);"success"===i.status?(e.success(i.message),1==l&&window.location.reload()):e.error(i.message),o.removeClass("tf-btn-loading"),t(".tf-setting-save-btn .tf-submit-btn").removeClass("tf-btn-loading"),1==l&&n.find(".tf-import-btn").removeClass("tf-btn-loading")},error:function(t){o.removeClass("tf-btn-loading"),console.log(t.responseText),t.responseText.includes("max_input_vars")?e.error({message:tf_admin_params.max_input_vars_notice,duration:15e3,dismissible:!0}):e.error({message:t.responseText,duration:6e3})}})}));const f=e=>{let a=e,n=a.attr("id"),o=a.data("placeholder");"yes"===a.data("delete")?t("#"+n).select2({placeholder:o,allowClear:!0,templateResult:d,templateSelection:function(e){if(!e.id)return e.text;var a=t(e.element).data("edit-url");return a?t("<span>"+e.text+' <a target="_blank" href="'+a+'" class="tf-edit-room"><i class="fa-regular fa-pen-to-square"></i></a></span>'):e.text}}):t("#"+n).select2({placeholder:o,allowClear:!0,templateSelection:function(e){if(!e.id)return e.text;var a=t(e.element).data("edit-url");return a?t("<span>"+e.text+' <a target="_blank" href="'+a+'" class="tf-edit-room"><i class="fa-regular fa-pen-to-square"></i></a></span>'):e.text}})};function d(e){return e.id?t('<span style="display: flex; justify-content: space-between;">'+e.text+'<span class="tf-remove-button" data-id="'+e.id+'">Remove</span></span>'):e.text}function c(){var e=[];return t(".tf-repeater-wrap-room-options .tf-single-repeater-room-options").each((function(a){let n=t(this).find('[name="tf_repeater_count"]').val(),o=t(this).find(`[name="tf_room_opt[room-options][${n}][option_pricing_type]"]`).val(),i=t(this).find(`[name="tf_room_opt[room-options][${n}][option_title]"]`).val();void 0!==n&&(e[n]={index:n,title:i,type:o})})),e}t("select.tf-select2").each((function(){var e=t(this);f(e)})),t(document).on("select2:selecting",".tf-select2",(function(e){if("tf-remove-button"===e.params.args.originalEvent.target.className){e.stopPropagation(),e.preventDefault();let n=t(this).closest(".tf-fieldset"),o=n.find("#category_name").val(),i=n.find("#category_select_field_name").val();var a=t(e.params.args.originalEvent.target).data("id");t.ajax({url:tf_options.ajax_url,method:"POST",data:{action:"tf_delete_category_data",_nonce:tf_admin_params.tf_nonce,term_id:a,categoryName:o},success:function(e){if(JSON.parse(e).success){let e=t("#"+i);e.find('option[value="'+a+'"]').remove(),e.select2("close")}}})}})),t("select.tf-shortcode-select2").each((function(e){let a=t(this);a.attr("id"),f(a),t(this).on("select2:select",(function(e){var a=t(e.currentTarget).val();a&&a.includes("'all'")&&t(this).val(["'all'"]).trigger("change.select2")}))})),t(window).on("load",(function(){c()}));var p=function(e){var a=this;this.container=e,this.calendar=null,this.roomCalData=null,this.fullCalendar,this.timeOut,this.fullCalendarOptions={initialView:"dayGridMonth",firstDay:1,headerToolbar:{start:"today",center:"title",end:"prev,next"},displayEventTime:!0,selectable:!0,select:function({start:t,end:e,startStr:n,endStr:o,allDay:i,jsEvent:r,view:s,resource:l}){if(moment(t).isBefore(moment(),"day")||moment(e).isBefore(moment(),"day"))a.fullCalendar.unselect(),u("","",a.roomCalData);else{var f=moment(t).format("Z");f=f.split(":"),f=parseInt(f[0])+":00",u(moment(t).utcOffset(f).format(String(tf_options.tf_admin_date_format||"MM/DD/YYYY").toUpperCase()),moment(e).utcOffset(f).subtract(1,"day").format(String(tf_options.tf_admin_date_format||"MM/DD/YYYY").toUpperCase()),a.roomCalData)}},events:function({start:e,end:n,startStr:o,endStr:i,timeZone:r},s,l){t.ajax({url:tf_options.ajax_url,dataType:"json",type:"POST",data:{action:"tf_get_hotel_room_availability",_nonce:tf_admin_params.tf_nonce,new_post:t(a.container).find('[name="new_post"]').val(),room_id:t(a.container).find('[name="room_id"]').val(),avail_date:t(a.container).find(".avail_date").val(),option_arr:c()},beforeSend:function(){t(a.container).css({"pointer-events":"none",opacity:"0.5"}),t(a.calendar).addClass("tf-content-loading")},success:function(e){"object"==typeof e&&s(e?.avail_data),t(".tf-single-options").html(e?.options_html),t(a.container).css({"pointer-events":"auto",opacity:"1"}),t(a.calendar).removeClass("tf-content-loading")},error:function(t){console.log(t)}})},eventContent:function(t){const e=t.event.title,a=document.createElement("div");return a.classList.add("fc-event-title"),a.innerHTML=e,{domNodes:[a]}},eventClick:function({event:e,el:n,jsEvent:o,view:i}){let r,s=moment(e.start,String(tf_options.tf_admin_date_format||"MM/DD/YYYY").toUpperCase()).format(String(tf_options.tf_admin_date_format||"MM/DD/YYYY").toUpperCase());r=e.end?moment(e.end,String(tf_options.tf_admin_date_format||"MM/DD/YYYY").toUpperCase()).format(String(tf_options.tf_admin_date_format||"MM/DD/YYYY").toUpperCase()):s,u(s,r,a.roomCalData);let l=t(".tf_room_pricing_by").val();if("1"===l)void 0!==e.extendedProps.price&&t("[name='tf_room_price']",a.roomCalData).val(e.extendedProps.price);else if("2"===l)void 0!==e.extendedProps.adult_price&&t("[name='tf_room_adult_price']",a.roomCalData).val(e.extendedProps.adult_price),void 0!==e.extendedProps.child_price&&t("[name='tf_room_child_price']",a.roomCalData).val(e.extendedProps.child_price);else if(0!=e.extendedProps.options_count)for(var f=0;f<=e.extendedProps.options_count-1;f++)t("[name='tf_room_option_"+f+"']",a.roomCalData).prop("checked",1==e.extendedProps["tf_room_option_"+f]),t("[name='tf_option_room_price_"+f+"']",a.roomCalData).val(e.extendedProps["tf_option_room_price_"+f]),t("[name='tf_option_adult_price_"+f+"']",a.roomCalData).val(e.extendedProps["tf_option_adult_price_"+f]),t("[name='tf_option_child_price_"+f+"']",a.roomCalData).val(e.extendedProps["tf_option_child_price_"+f]);e.extendedProps.status&&t("[name='tf_room_status'] option[value="+e.extendedProps.status+"]",a.roomCalData).prop("selected",!0)}},this.init=function(){a.container=jQuery(e),a.calendar=e.querySelector(".tf-room-cal"),a.roomCalData=t(".tf-room-cal-field",a.container),u("","",a.roomCalData),a.initCalendar()},this.initCalendar=function(){"undefined"!=typeof FullCalendar&&(a.fullCalendar=new FullCalendar.Calendar(a.calendar,a.fullCalendarOptions),a.fullCalendar.render())}};function u(e,a,n){t(".tf_room_check_in",n).val(e),t(".tf_room_check_out",n).val(a)}const m=()=>{t(".tf-room-cal-wrap").each((function(t,e){new p(e).init()}))};m(),t(".tf-room-cal-wrap").each((function(e,a){let n=t(a).find('[name="tf_room_check_in"]').flatpickr({dateFormat:tf_options.tf_admin_date_format||"MM/DD/YYYY",minDate:"today",altInput:!0,altFormat:tf_options.tf_admin_date_format,onChange:function(t,e,a){o.set("minDate",e)}}),o=t(a).find('[name="tf_room_check_out"]').flatpickr({dateFormat:tf_options.tf_admin_date_format||"MM/DD/YYYY",minDate:"today",altInput:!0,altFormat:tf_options.tf_admin_date_format,onChange:function(t,e,a){n.set("maxDate",e)}})})),t(document).on("click",".tf_room_cal_update",(function(a){a.preventDefault();let n=t(this),o=n.closest(".tf-room-cal-wrap"),i=n.closest(".tf-room-cal-wrap")[0],r=o.find(".tf-room-cal"),s=t("input, select",o.find(".tf-room-cal-field")).serializeArray(),l=t(".tf_room_pricing_by").val(),f=o.find(".avail_date");s.push({name:"action",value:"tf_add_hotel_room_availability"}),s.push({name:"_nonce",value:tf_admin_params.tf_nonce}),s.push({name:"price_by",value:l}),s.push({name:"avail_date",value:f.val()}),s.push({name:"options_count",value:c().length}),t.ajax({url:tf_options.ajax_url,type:"POST",data:s,beforeSend:function(){o.css({"pointer-events":"none",opacity:"0.5"}),r.addClass("tf-content-loading"),n.addClass("tf-btn-loading")},success:function(a){if("object"==typeof a){if(!0===a.data.status){f.val(a.data.avail_date),e.success(a.data.message),t(".tf_room_check_in",l=o).val(""),t(".tf_room_check_out",l).val(""),t('[name="tf_room_price"]',l).val(""),t('[name="tf_room_adult_price"]',l).val(""),t('[name="tf_room_child_price"]',l).val("");var s=new p(i);s.init(),s.fullCalendar&&s.fullCalendar.refetchEvents()}else e.error(a.data.message);o.css({"pointer-events":"auto",opacity:"1"}),r.removeClass("tf-content-loading"),n.removeClass("tf-btn-loading")}var l},error:function(t){console.log(t),o.css({"pointer-events":"auto",opacity:"1"}),r.removeClass("tf-content-loading"),n.removeClass("tf-btn-loading")},complete:function(){o.css({"pointer-events":"auto",opacity:"1"}),r.removeClass("tf-content-loading"),n.removeClass("tf-btn-loading")}})})),t(document).on("change",".tf_room_pricing_by",(function(e){let a=t(this).val();"1"===a?(t(".tf-price-by-room").show(),t(".tf-price-by-person").hide(),t(".tf-room-cal-field .tf-single-option").hide()):"2"===a?(t(".tf-price-by-person").show(),t(".tf-price-by-room").hide(),t(".tf-room-cal-field .tf-single-option").hide()):"3"===a&&(t(".tf-price-by-room").hide(),t(".tf-price-by-person").hide(),t(".tf-room-cal-field .tf-single-option").show())})),t(document).on("change",".tf-switch",(function(e){var a=t(this);this.checked?a.val(1):a.val(""),a.hasClass("tf_room_availability_by_date")&&m(),a.hasClass("tf_apartment_availability_by_date")&&v()}));var _=function(e){var a=this;this.container=e,this.calendar=null,this.apartmentCalData=null,this.fullCalendar,this.timeOut,this.fullCalendarOptions={initialView:"dayGridMonth",firstDay:1,headerToolbar:{start:"today",center:"title",end:"prev,next"},displayEventTime:!0,selectable:!0,select:function({start:t,end:e,startStr:n,endStr:o,allDay:i,jsEvent:r,view:s,resource:l}){if(moment(t).isBefore(moment(),"day")||moment(e).isBefore(moment(),"day"))a.fullCalendar.unselect(),h("","",a.apartmentCalData);else{var f=moment(t).format("Z");f=f.split(":"),f=parseInt(f[0])+":00",h(moment(t).utcOffset(f).format(String(tf_options.tf_admin_date_format||"MM/DD/YYYY").toUpperCase()),moment(e).utcOffset(f).subtract(1,"day").format(String(tf_options.tf_admin_date_format||"MM/DD/YYYY").toUpperCase()),a.apartmentCalData)}},events:function({start:e,end:n,startStr:o,endStr:i,timeZone:r},s,l){t.ajax({url:tf_options.ajax_url,dataType:"json",type:"POST",data:{action:"tf_get_apartment_availability",_nonce:tf_admin_params.tf_nonce,new_post:t('[name="new_post"]').val(),apartment_id:t('[name="apartment_id"]').val(),apt_availability:t(".apt_availability").val()},beforeSend:function(){t(a.container).css({"pointer-events":"none",opacity:"0.5"}),t(a.calendar).addClass("tf-content-loading")},success:function(e){"object"==typeof e&&s(e),t(a.container).css({"pointer-events":"auto",opacity:"1"}),t(a.calendar).removeClass("tf-content-loading")},error:function(t){console.log(t)}})},eventContent:function(t){const e=t.event.title,a=document.createElement("div");return a.classList.add("fc-event-title"),a.innerHTML=e,{domNodes:[a]}},eventClick:function({event:e,el:n,jsEvent:o,view:i}){let r,s=moment(e.start,String(tf_options.tf_admin_date_format||"MM/DD/YYYY").toUpperCase()).format(String(tf_options.tf_admin_date_format||"MM/DD/YYYY").toUpperCase());r=e.end?moment(e.end,String(tf_options.tf_admin_date_format||"MM/DD/YYYY").toUpperCase()).format(String(tf_options.tf_admin_date_format||"MM/DD/YYYY").toUpperCase()):s,h(s,r,a.apartmentCalData),"per_night"===t(".tf_apt_pricing_type").val()?void 0!==e.extendedProps.price&&t("[name='tf_apt_price']",a.apartmentCalData).val(e.extendedProps.price):(void 0!==e.extendedProps.adult_price&&t("[name='tf_apt_adult_price']",a.apartmentCalData).val(e.extendedProps.adult_price),void 0!==e.extendedProps.child_price&&t("[name='tf_apt_child_price']",a.apartmentCalData).val(e.extendedProps.child_price),void 0!==e.extendedProps.infant_price&&t("[name='tf_apt_infant_price']",a.apartmentCalData).val(e.extendedProps.infant_price)),e.extendedProps.status&&t("[name='tf_apt_status'] option[value="+e.extendedProps.status+"]",a.apartmentCalData).prop("selected",!0)}},this.init=function(){a.container=jQuery(e),a.calendar=e.querySelector(".tf-apt-cal"),a.apartmentCalData=t(".tf-apt-cal-field",a.container),h("","",a.apartmentCalData),a.initCalendar()},this.initCalendar=function(){"undefined"!=typeof FullCalendar&&(a.fullCalendar=new FullCalendar.Calendar(a.calendar,a.fullCalendarOptions),a.fullCalendar.render())}};function h(e,a,n){t(".tf_apt_check_in",n).val(e),t(".tf_apt_check_out",n).val(a)}const v=()=>{t(".tf-apt-cal-wrap").each((function(e,a){new _(a).init();let n=t(a).find('[name="tf_apt_check_in"]').flatpickr({dateFormat:tf_options.tf_admin_date_format||"MM/DD/YYYY",minDate:"today",altInput:!0,altFormat:tf_options.tf_admin_date_format,onChange:function(t,e,a){o.set("minDate",e)}}),o=t(a).find('[name="tf_apt_check_out"]').flatpickr({dateFormat:tf_options.tf_admin_date_format||"MM/DD/YYYY",minDate:"today",altInput:!0,altFormat:tf_options.tf_admin_date_format,onChange:function(t,e,a){n.set("maxDate",e)}})}))};function g(t){wp.editor.initialize(t,{tinymce:{wpautop:!0,plugins:"charmap colorpicker hr lists paste tabfocus textcolor fullscreen wordpress wpautoresize wpeditimage wpemoji wpgallery wplink wptextpattern",toolbar1:"formatselect,bold,italic,bullist,numlist,blockquote,alignleft,aligncenter,alignright,link,wp_more,spellchecker,fullscreen,wp_adv,listbuttons",toolbar2:"styleselect,strikethrough,hr,forecolor,pastetext,removeformat,charmap,outdent,indent,undo,redo,wp_help"},quicktags:{buttons:"strong,em,link,block,del,ins,img,ul,ol,li,code,more,close"},mediaButtons:!1})}function b(){t(".tf-repeater-wrap .tf-single-repeater-book-confirm-field").length>0&&t(".tf-repeater-wrap .tf-single-repeater-book-confirm-field").each((function(){let e=t(this),a=e.find('input[name="tf_repeater_count"]').val();0!=a&&1!=a&&2!=a||(e.find(".tf_hidden_fields").hide(),e.find(".tf-repeater-icon-clone").hide(),e.find(".tf-repeater-icon-delete").hide())})),t(".tf-repeater-wrap .tf-single-repeater-hotel-book-confirm-field").length>0&&t(".tf-repeater-wrap .tf-single-repeater-hotel-book-confirm-field").each((function(){let e=t(this),a=e.find('input[name="tf_repeater_count"]').val();0!=a&&1!=a&&2!=a||(e.find(".tf_hidden_fields").hide(),e.find(".tf-repeater-icon-clone").hide(),e.find(".tf-repeater-icon-delete").hide())})),t(".tf-repeater-wrap .tf-single-repeater-car-book-confirm-field").length>0&&t(".tf-repeater-wrap .tf-single-repeater-car-book-confirm-field").each((function(){let e=t(this),a=e.find('input[name="tf_repeater_count"]').val();0!=a&&1!=a&&2!=a||(e.find(".tf_hidden_fields").hide(),e.find(".tf-repeater-icon-clone").hide(),e.find(".tf-repeater-icon-delete").hide())}))}v(),t(document).on("click",".tf_apt_cal_update",(function(a){a.preventDefault();let n=t(this),o=n.closest(".tf-apt-cal-wrap"),i=n.closest(".tf-apt-cal-wrap")[0],r=o.find(".tf-apt-cal"),s=t("input, select",o.find(".tf-apt-cal-field")).serializeArray(),l=t(".tf_apt_pricing_type").val(),f=o.find(".apt_availability");s.push({name:"action",value:"tf_add_apartment_availability"}),s.push({name:"_nonce",value:tf_admin_params.tf_nonce}),s.push({name:"pricing_type",value:l}),s.push({name:"apt_availability",value:f.val()}),t.ajax({url:tf_options.ajax_url,type:"POST",data:s,beforeSend:function(){o.css({"pointer-events":"none",opacity:"0.5"}),r.addClass("tf-content-loading"),n.addClass("tf-btn-loading")},success:function(a){if("object"==typeof a){if(!0===a.data.status){f.val(a.data.apt_availability),e.success(a.data.message),t(".tf_apt_check_in",l=o).val(""),t(".tf_apt_check_out",l).val(""),t('[name="tf_apt_price"]',l).val(""),t('[name="tf_apt_adult_price"]',l).val(""),t('[name="tf_apt_child_price"]',l).val(""),t('[name="tf_apt_infant_price"]',l).val("");var s=new _(i);s.init(),s.fullCalendar&&s.fullCalendar.refetchEvents()}else e.error(a.data.message);o.css({"pointer-events":"auto",opacity:"1"}),r.removeClass("tf-content-loading"),n.removeClass("tf-btn-loading")}var l},error:function(t){console.log(t),o.css({"pointer-events":"auto",opacity:"1"}),r.removeClass("tf-content-loading"),n.removeClass("tf-btn-loading")},complete:function(){o.css({"pointer-events":"auto",opacity:"1"}),r.removeClass("tf-content-loading"),n.removeClass("tf-btn-loading")}})})),t(document).on("change",".tf_apt_pricing_type",(function(e){let a=t(this).val();"per_night"===a?(t(".tf-price-by-night").show(),t(".tf-price-by-person").hide()):"2"===a&&(t(".tf-price-by-person").show(),t(".tf-price-by-night").hide())})),t("textarea.wp_editor, textarea.tf_wp_editor").each((function(){let e=t(this).attr("id");setTimeout((function(){g(e)}),1e3)})),b(),t(document).on("click",".tf-repeater-icon-add",(function(){var e=t(this).parent().parent(),r=t(this).attr("data-repeater-id"),s=(t(this).attr("data-repeater-max"),e.find(".tf-single-repeater-clone-"+r+" .tf-single-repeater-"+r).clone()),l=(e.find(".tf-repeater-wrap-"+r+" .tf-single-repeater-"+r).length,s.find(':input[name="tf_parent_field"]').val()),d=s.find(':input[name="tf_current_field"]').val(),c=parseInt(t(this).closest(".tf-repeater").attr("data-max-index"))+1;t(this).closest(".tf-repeater").attr("data-max-index",c),e.find(".tf-repeater-wrap .tf-field-notice-inner").remove(),s.find(':input[name="tf_repeater_count"]').val(c);let p=s.find(".tf-field-date");p.length>0&&(p.find("input").each((function(){""!=t(this).attr("name")&&void 0!==t(this).attr("name")||t(this).remove()})),a(p));let u=s.find(".tf-field-time");u.length>0&&n(u);let m=s.find(".tf-field-color");if(m.length>0&&(m.find("input.tf-color").each((function(){var e=t(this).clone();t(this).closest("li").length>0?t(this).closest("li").append(e):t(this).closest(".tf-fieldset").append(e),t(this).closest(".wp-picker-container").remove()})),o(m)),""==l){if(s.find(":input").each((function(){this.name=this.name.replace("_____","").replace("["+d+"][00]","["+d+"]["+c+"]"),this.id=this.id.replace("_____","").replace("["+d+"][00]","["+d+"]["+c+"]")})),void 0!==(_=s.find('.tf-repeater input[name="tf_parent_field"]').val()))var _=_.replace("["+d+"][00]","["+d+"]["+c+"]");s.find('.tf-repeater input[name="tf_parent_field"]').val(_)}else _=s.find(':input[name="tf_parent_field"]').val(),s.find(":input").each((function(){this.name=this.name.replace("_____","").replace("["+d+"][00]","["+d+"]["+c+"]"),this.id=this.id.replace("_____","").replace("["+d+"][00]","["+d+"]["+c+"]")}));s.find("label").each((function(){var e=t(this).attr("for");void 0!==e&&(e=e.replace("_____","").replace("["+d+"][00]","["+d+"]["+c+"]"),t(this).attr("for",e))})),s.find(".tf-icon-select").each((function(e){var a=t(this).attr("id");void 0!==a&&(a=a+e+c,t(this).attr("id",a))})),s.find("[data-depend-id]").each((function(){var e=t(this).attr("data-depend-id");void 0!==e&&(e=e.replace("["+d+"][00]","["+d+"]["+c+"]"),t(this).attr("data-depend-id",e))})),s.find("[data-controller]").each((function(){var e=t(this).attr("data-controller");void 0!==e&&(e=e.replace("["+d+"][00]","["+d+"]["+c+"]"),t(this).attr("data-controller",e))})),s.find(".wp-editor-wrap").each((function(){var e=t(this).find(".tf_wp_editor").show(),a=t("#"+e.attr("id")).val();if(a&&void 0!==a)var n=tinymce.get(e.attr("id")).getContent();else n="";e.val(n),t(this).closest(".tf-field-textarea").append(e),t(this).remove()}));var h=e.find(".tf-repeater-wrap-"+r);s.appendTo(h).show(),s.find("textarea.parent_wp_editor").each((function(){var e=Math.random().toString(36).substring(3,9)+1;t(this).attr("id",d+e),t(this).attr("data-count-id",e),g(t(this).attr("id"))})),s.find("select.tf-select2-parent").each((function(){this.id=this.id.replace(d+"__00",d+"__"+c),t(this).attr("id");var e=t(this);f(e)})),i(),b()})),t(document).on("click",".tf-repeater-icon-delete",(function(){t(this).attr("data-repeater-max");var e=t(this).closest(".tf-repeater-wrap");return e.find(".tf-single-repeater").length,confirm("Are you sure to delete this item?")&&(e.find(".tf-field-notice-inner").remove(),t(this).closest(".tf-single-repeater").remove()),!1})),t(document).on("click",".tf-repeater-icon-clone",(function(){var e=t(this).closest(".tf-repeater-wrap");let r=t(this).closest(".tf-single-repeater").clone();t(this).attr("data-repeater-max");var s=r.find('input[name="tf_parent_field"]').val(),l=r.find('input[name="tf_current_field"]').val(),d=r.find('input[name="tf_repeater_count"]').val(),c=(e.find(".tf-single-repeater-"+l).length,parseInt(t(this).closest(".tf-repeater").attr("data-max-index"))+1);t(this).closest(".tf-repeater").attr("data-max-index",c),e.find(".tf-field-notice-inner").remove();let p=r.find(".tf-field-date");p.length>0&&(p.find("input").each((function(){""!=t(this).attr("name")&&void 0!==t(this).attr("name")||t(this).remove()})),a(p));let u=r.find(".tf-field-time");u.length>0&&n(u);let m=r.find(".tf-field-color");if(m.length>0&&(m.find("input.tf-color").each((function(){var e=t(this).clone();t(this).closest("li").length>0?t(this).closest("li").append(e):t(this).closest(".tf-fieldset").append(e),t(this).closest(".wp-picker-container").remove()})),o(m)),""==s){if(r.find(":input").each((function(){0==t(this).closest(".tf-single-repeater-clone").length&&(this.name=this.name.replace("_____","").replace("["+l+"]["+d+"]","["+l+"]["+c+"]"),this.id=this.id.replace("_____","").replace("["+l+"]["+d+"]","["+l+"]["+c+"]"))})),void 0!==(_=r.find('.tf-repeater input[name="tf_parent_field"]').val()))var _=_.replace("["+l+"]["+d+"]","["+l+"]["+c+"]");r.find('.tf-repeater input[name="tf_parent_field"]').val(_)}else r.find(":input").each((function(){0==t(this).closest(".tf-single-repeater-clone").length&&(this.name=this.name.replace("_____","").replace("["+l+"]["+d+"]","["+l+"]["+c+"]"),this.id=this.id.replace("_____","").replace("["+l+"]["+d+"]","["+l+"]["+c+"]"))}));r.find("label").each((function(){if(void 0!==(e=t(this).attr("for"))){e=e.replace("_____","").replace("["+l+"]["+d+"]","["+l+"]["+c+"]");var e=t(this).attr("for",e)}})),r.find(".tf-icon-select").each((function(e){var a=t(this).attr("id");void 0!==a&&(a=a+e+c,t(this).attr("id",a))})),r.find("[data-depend-id]").each((function(){var e=t(this).attr("data-depend-id");void 0!==e&&(e=e.replace("["+l+"]["+d+"]","["+l+"]["+c+"]"),t(this).attr("data-depend-id",e))})),r.find("[data-controller]").each((function(){var e=t(this).attr("data-controller");void 0!==e&&(e=e.replace("["+l+"]["+d+"]","["+l+"]["+c+"]"),t(this).attr("data-controller",e))})),r.find('input[name="tf_repeater_count"]').val(c),r.find(".wp-editor-wrap").each((function(){var e=t(this).find(".tf_wp_editor").show(),a=(t("#"+e.attr("id")).val(),e.attr("id"));if(""!=a&&void 0!==a)var n=tinymce.editors[a].getContent();else n="";e.val(n),t(this).closest(".tf-field-textarea").append(e),t(this).remove()})),r.find(".tf-field-select2").each((function(){var e=t(this).find("select.tf-select-two").select2("val");t(this).find("select.tf-select-two").removeAttr("data-select2-id aria-hidden tabindex"),t(this).find("select.tf-select-two option").removeAttr("data-select2-id"),t(this).find("select.tf-select-two").removeClass("select2-hidden-accessible");var a=t(this).find("select.tf-select-two").show();a.val(e),t(this).find(".tf-fieldset").append(a),t(this).find("span.select2-container").remove()})),t(this).closest(".tf-repeater-wrap").append(r).show(),r.find("textarea.parent_wp_editor, textarea.wp_editor").each((function(){var e=Math.random().toString(36).substring(3,9)+1;t(this).attr("id",l+e),t(this).attr("data-count-id",e),g(t(this).attr("id"))})),r.find("select.tf-select2-parent, select.tf-select2").each((function(){this.id=this.id.replace(l+"__"+d,l+"__"+c);var e=t(this);f(e)})),i()})),t(document).on("click",".tf-repeater-title, .tf-repeater-icon-collapse",(function(){var e=t(this).closest(".tf-single-repeater").find("input[name=tf_current_field]").val();t(this).closest(".tf-single-repeater-"+e).find(".tf-repeater-content-wrap").slideToggle(),t(this).closest(".tf-single-repeater-"+e).children(".tf-repeater-content-wrap").toggleClass("hide"),1==t(this).closest(".tf-single-repeater-"+e).children(".tf-repeater-content-wrap").hasClass("hide")?t(this).closest(".tf-single-repeater-"+e+" .tf-repeater-header").children(".tf-repeater-icon-collapse").html('<i class="fa-solid fa-angle-down"></i>'):t(this).closest(".tf-single-repeater-"+e+" .tf-repeater-header").children(".tf-repeater-icon-collapse").html('<i class="fa-solid fa-angle-up"></i>')})),t(".tf-repeater-wrap").sortable({handle:".tf-repeater-icon-move",start:function(e,a){t(a.item).find(".tf_wp_editor").attr("id")},stop:function(e,a){t(a.item).find(".tf_wp_editor").each((function(){var e=t(this).attr("id");tinyMCE.execCommand("mceRemoveEditor",!1,e),tinyMCE.execCommand("mceAddEditor",!1,e)}))}}),t(".tf-switch-group-wrap").sortable({placeholder:"tf-switch-drag-highlight"}),t(document).on("click",".tf-tab-item",(function(){var e=t(this),a=e.data("tab-id");1==e.parent().parent().find(".tf-tab-item-content").hasClass("show")&&e.parent().parent().find(".tf-tab-item-content").removeClass("show"),e.parent().find(".tf-tab-item").removeClass("show"),e.addClass("show"),e.parent().parent().find(".tf-tab-item-content[data-tab-id = "+a+"]").addClass("show"),m(),v()})),t(document).on("click",".tf-add-category span",(function(e){e.preventDefault(),t(this).closest(".tf-fieldset").children(".tf-popup-box").css("display","flex")})),t(document).on("click",".tf-add-category-box-close",(function(e){e.preventDefault(),t(".tf-popup-box").hide()})),t(document).on("click",".tf-category-button",(function(e){e.preventDefault();var a=t(this).closest(".tf-add-category-box");let n=a.find("#category_name").val(),o=a.find("#category_title").val(),i=a.find("#parent_category").val(),r=a.find("#category_select_field_name").val();t.ajax({url:tf_options.ajax_url,method:"POST",data:{action:"tf_insert_category_data",_nonce:tf_admin_params.tf_nonce,categoryName:n,categoryTitle:o,parentCategory:i},success:function(e){var n=JSON.parse(e);if(n.insert_category){var o=new Option(n.insert_category.title,n.insert_category.id,!0,!0);t("#"+r).append(o).trigger("change");var i=new Option(n.insert_category.title,n.insert_category.id,!1,!1);a.find("#parent_category").append(i).trigger("change")}t(".tf-popup-box").hide(),a.find("#category_title").val(""),a.find("#parent_category").val("")}})})),t(document).on("click",".tf-add-new-post-button",(function(a){a.preventDefault();var n=t(this),o=n.closest(".tf-add-category-box");let i=o.find(".post_type").val(),r=o.find(".post_title").val(),s=o.find(".post_select_field_name").val(),l=o.find(".field_id").val(),f=o.find(".post_id").val();r?t.ajax({url:tf_options.ajax_url,method:"POST",data:{action:"tf_insert_post_data",_nonce:tf_admin_params.tf_nonce,postType:i,postTitle:r,fieldId:l,postId:f},beforeSend:function(){n.addClass("tf-btn-loading")},success:function(e){var a=JSON.parse(e);if(a.insert_post){var i=new Option(a.insert_post.title,a.insert_post.id,!0,!0);"tf_rooms"==l&&t(i).attr("data-edit-url",a.insert_post.edit_url),t("#"+s).append(i).trigger("change")}n.removeClass("tf-btn-loading"),t(".tf-popup-box").hide(),o.find(".post_title").val("")}}):e.error("Please enter title")}))}))}(jQuery),function(t){t(document).on("click",".tf-image-close",(function(e){e.preventDefault(),$this=t(this),t(this).attr("tf-field-name").replace(/[.[\]_-]/g,"_"),$this.parent().parent().find("input").val(""),$this.parent().html("")})),t(document).on("click",".tf-gallery-remove",(function(e){e.preventDefault(),$this=t(this),t(this).attr("tf-field-name").replace(/[.[\]_-]/g,"_"),$this.parent().parent().find("input").val(""),$this.parent().parent().find(".tf-fieldset-gallery-preview").html(""),t("a.tf-gallery-edit, a.tf-gallery-remove").css("display","none")})),t(document).ready((function(){t("body").on("click",".tf-media-upload",(function(a){var n=t(this),o=t(this).attr("tf-field-name");return o.replace(/[.[\]_-]/g,"_"),(e=wp.media({title:"Select Image",button:{text:"Insert Image"},multiple:!1})).on("select",(function(){var t=e.state().get("selection").first().toJSON();n.parent().parent().find("input").val(t.url),n.parent().parent().find(".tf-fieldset-media-preview").html(`<div class="tf-image-close" tf-field-name='${o}'></div><img src='${t.url}' />`)})),e.open(),!1})),t("body").on("click",".tf-gallery-upload, .tf-gallery-edit",(function(e){var n=t(this);return t(this).attr("tf-field-name").replace(/[.[\]_-]/g,"_"),(a=wp.media({title:"Select Gallery",button:{text:"Insert Gallery"},multiple:"add"})).on("open",(function(){var t=a.state().get("selection"),e=n.parent().parent().find("input").val();e.length>0&&e.split(",").forEach((function(e){attachment=wp.media.attachment(e),attachment.fetch(),t.add(attachment?[attachment]:[])}))})),a.on("select",(function(){var t=[],e=[],o=a.state().get("selection").toJSON();for(i in n.parent().parent().find(".tf-fieldset-gallery-preview").html(""),o){var r=o[i];t.push(r.id),e.push(r.url),n.parent().parent().find(".tf-fieldset-gallery-preview").append(`<img src='${r.url}' />`)}n.parent().parent().find("input").val(t.join(",")),n.parent().find("a.tf-gallery-edit, a.tf-gallery-remove").css("display","inline-block")})),a.open(),!1})),t("#addtag > .submit #submit").on("click",(function(){t(".tf-fieldset-media-preview").html("")})),"googlemap"!=tf_options.gmaps&&t(".tf-field-map").each((function(){var e=t(this),a=e.find(".tf--map-osm"),n=e.find(".tf--map-search input"),o=e.find(".tf--latitude"),i=e.find(".tf--longitude"),r=e.find(".tf--zoom"),s=a.data("map"),l=L.map(a.get(0),s);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(l);var f=L.marker(s.center,{draggable:!0}).addTo(l),d=function(t){o.val(t.lat),i.val(t.lng),r.val(l.getZoom())};o.on("change",(function(){})),l.on("click",(function(t){f.setLatLng(t.latlng),d(t.latlng)})),l.on("zoom",(function(){d(f.getLatLng())})),f.on("drag",(function(){d(f.getLatLng())})),f.on("dragend",(function(t){t.target._latlng.lng,t.target._latlng.lat})),n.length||(n=t('[data-depend-id="'+e.find(".tf--address-field").data("address-field")+'"]'));var c={};n.autocomplete({source:function(t,e){var a=t.term;a in c&&e(c[a])},select:function(t,e){if("no-data"===e.item.value)return!1;var a=L.latLng(e.item.lat,e.item.lon);l.panTo(a),f.setLatLng(a),d(a)},create:function(e,a){t(this).autocomplete("widget").addClass("tf-map-ui-autocomplate")}});var p=function(){var t=L.latLng(o.val(),i.val());l.panTo(t),f.setLatLng(t)};o.on("change",p),i.on("change",p),setInterval((function(){l.invalidateSize()}),100)})),t(".tf-mobile-tabs").on("click",(function(e){e.preventDefault(),t(".tf-admin-tab").toggleClass("active")})),t(".tf-faq-title").on("click",(function(){var e=t(this);e.hasClass("active")||(t(".tf-faq-desc").slideUp(400),t(".tf-faq-title").removeClass("active")),e.toggleClass("active"),e.next().slideToggle()}))}))}(jQuery),function(t){"use strict";function e(t,e,a){this.init(t,e,a)}function a(){this.rules=[]}t.extend(e.prototype,{init:function(t,e,a){this.controller=t,this.condition=e,this.value=a,this.rules=[],this.controls=[]},evalCondition:function(e,a,n,o,i){if("=="==n)return this.checkBoolean(o)==this.checkBoolean(i);if("!="==n)return this.checkBoolean(o)!=this.checkBoolean(i);if(">="==n)return Number(i)>=Number(o);if("<="==n)return Number(i)<=Number(o);if(">"==n)return Number(i)>Number(o);if("<"==n)return Number(i)<Number(o);if("()"==n)return window[o](e,a,i);if("any"==n){if(t.isArray(i)){for(var r=i.length-1;r>=0;r--)if(-1!==t.inArray(i[r],o.split(",")))return!0}else if(-1!==t.inArray(i,o.split(",")))return!0}else if("not-any"==n)if(t.isArray(i)){for(r=i.length-1;r>=0;r--)if(-1==t.inArray(i[r],o.split(",")))return!0}else if(-1==t.inArray(i,o.split(",")))return!0;return!1},checkBoolean:function(t){switch(t){case!0:case"true":case 1:case"1":t=!0;break;case null:case!1:case"false":case 0:case"0":t=!1}return t},checkCondition:function(t){if(!this.condition)return!0;var e=t.find(this.controller),a=this.getControlValue(t,e);return void 0!==a&&(a=this.normalizeValue(e,this.value,a),this.evalCondition(t,e,this.condition,this.value,a))},normalizeValue:function(t,e,a){return"number"==typeof e?parseFloat(a):a},getControlValue:function(t,e){return e.length>1&&("radio"==e.attr("type")||"checkbox"==e.attr("type"))?e.filter(":checked").map((function(){return this.value})).get():"checkbox"==e.attr("type")||"radio"==e.attr("type")?e.is(":checked"):e.val()},createRule:function(t,a,n){var o=new e(t,a,n);return this.rules.push(o),o},include:function(t){this.controls.push(t)},applyRule:function(e,a){var n;n=void 0===a?this.checkCondition(e):a;var o=t.map(this.controls,(function(t,a){return e.find(t)}));n?(t(o).each((function(){t(this).removeClass("tf-depend-on")})),t(this.rules).each((function(){this.applyRule(e)}))):(t(o).each((function(){t(this).addClass("tf-depend-on")})),t(this.rules).each((function(){this.applyRule(e,!1)})))}}),t.extend(a.prototype,{createRule:function(t,a,n){var o=new e(t,a,n);return this.rules.push(o),o},applyRules:function(e){t(this.rules).each((function(){this.applyRule(e)}))}}),t.tf_deps={createRuleset:function(){return new a},enable:function(t,e,a){return t.on("change keyup",(function(n){var o=n.target.getAttribute("data-depend-id")||n.target.getAttribute("data-sub-depend-id");-1!==a.indexOf(o)&&e.applyRules(t)})),e.applyRules(t),!0}}}(jQuery),function(t){t(document).ready((function(){1==tf_options.tf_chart_enable&&(document.getElementById("tf_months"),document.getElementById("tf_months").getContext("2d"),t("#tf_months"),new Chart("tf_months",{type:"line",data:{labels:["January","February","March","April","May","June","July","August","September","October","November","December"],datasets:[{label:"Completed Booking",borderColor:"#003C79",tension:.1,data:tf_options.tf_complete_order,fill:!1},{label:"Cancelled Booking",borderColor:"red",tension:.1,data:tf_options.tf_cancel_orders,fill:!1}]},options:{layout:{padding:10},legend:{display:!0},title:{display:!0,text:""}}})),t(document).on("change","#tf-month-report",(function(){var e=t(this).val();if(0!=e){t("#tf-report-loader").addClass("show"),t(".tf-order-report").find("iframe").remove();var a=t("#tf-year-report").val();jQuery.ajax({type:"post",url:tf_options.ajax_url,data:{action:"tf_month_reports",_nonce:tf_admin_params.tf_nonce,month:e,year:a},success:function(e){if(e.success){var a=JSON.parse(e);document.getElementById("tf_months"),document.getElementById("tf_months").getContext("2d"),t("#tf_months"),new Chart("tf_months",{type:"line",data:{labels:a.months_day_number,datasets:[{label:"Completed Booking",borderColor:"#003C79",tension:.1,data:a.tf_complete_orders,fill:!1},{label:"Cancelled Booking",borderColor:"red",tension:.1,data:a.tf_cancel_orders,fill:!1}]},options:{layout:{padding:10},legend:{display:!0},title:{display:!0,text:a.tf_search_month}}}),t("#tf-report-loader").removeClass("show")}else t("#tf-report-loader").removeClass("show"),notyf.error(e.data)}})}})),t(document).on("change","#tf-year-report",(function(){var e=t(this).val(),a=t("#tf-month-report").val();0!=e&&0!=a&&(t("#tf-report-loader").addClass("show"),t(".tf-order-report").find("iframe").remove(),jQuery.ajax({type:"post",url:tf_options.ajax_url,data:{action:"tf_month_reports",_nonce:tf_admin_params.tf_nonce,month:a,year:e},success:function(e){var a=JSON.parse(e);document.getElementById("tf_months"),document.getElementById("tf_months").getContext("2d"),t("#tf_months"),new Chart("tf_months",{type:"line",data:{labels:a.months_day_number,datasets:[{label:"Completed Booking",borderColor:"#003C79",tension:.1,data:a.tf_complete_orders,fill:!1},{label:"Cancelled Booking",borderColor:"red",tension:.1,data:a.tf_cancel_orders,fill:!1}]},options:{layout:{padding:10},legend:{display:!0},title:{display:!0,text:a.tf_search_month}}}),t("#tf-report-loader").removeClass("show")}}))}))}))}(jQuery),function(t){t(document).on("click",".tf-generate-tour .tf-btn",(function(e){e.preventDefault();var a=[];t(this).parents(".tf-shortcode-generator-single").find(".tf-sg-field-wrap").each((function(){var e=t(this),n=e.find(".tf-setting-field").val(),o=e.find(".tf-setting-field").attr("data-term"),i=e.find(".post-count").attr("data-count"),r=e.find(".tf-shortcode-title-field ").attr("data-title"),s=e.find(".tf-shortcode-subtitle-field ").attr("data-subtitle"),l=e.find(".tf-shortcode-tour-tab-title-field ").attr("data-tour-tab-title"),f=e.find(".tf-shortcode-hotel-tab-title-field ").attr("data-hotel-tab-title"),d=e.find(".tf-shortcode-apartment-tab-title-field ").attr("data-apartment-tab-title"),c=e.find(".tf-shortcode-car-tab-title-field ").attr("data-car-tab-title");null!=o&&""!=o&&(n=o+"="+(n.length?n:'""')),null!=i&&""!=i&&(n=i+"="+(n.length?n:'""')),null!=r&&""!=r&&n.length&&(n=r+"="+(n.length?`"${n}"`:'""')),null!=s&&""!=s&&n.length&&(n=s+"="+(n.length?`"${n}"`:'""')),null!=l&&""!=l&&n.length&&(n=l+"="+(n.length?`"${n}"`:'""')),null!=f&&""!=f&&n.length&&(n=f+"="+(n.length?`"${n}"`:'""')),null!=d&&""!=d&&n.length&&(n=d+"="+(n.length?`"${n}"`:'""')),null!=c&&""!=c&&n.length&&(n=c+"="+(n.length?`"${n}"`:'""')),a.push(n)}));var n="["+a.filter(Boolean).join(" ")+"]";t(this).parents(".tf-shortcode-generator-single").find(".tf-shortcode-value").val(n),t(this).parents(".tf-shortcode-generator-single").find(".tf-copy-item").slideDown()})),t(document).on("click",".tf-sg-close",(function(e){t(this).parents(".tf-shortcode-generators").find(".tf-sg-form-wrapper").fadeOut()})),t(document).on("click",".tf-shortcode-btn",(function(e){var a=t(this);a.parents(".tf-shortcode-generator-single").find(".tf-sg-form-wrapper").fadeIn(),a.parents(".tf-shortcode-generator-single").on("mouseup",(function(e){var a=t(this).find(".tf-shortcode-generator-form"),n=a.parent(".tf-sg-form-wrapper");a.is(e.target)||0!==a.has(e.target).length||n.fadeOut()}))})),t(document).on("click",".tf-copy-btn",(function(){var e=t(this).parent(".tf-shortcode-field").find("#tf-shortcode");e&&(e.select(),document.execCommand("copy")),t(this).parents(".tf-copy-item").append('<div><span class="tf-copied-msg">Copied<span></div>'),t("span.tf-copied-msg").animate({opacity:0},1e3,(function(){t(this).slideUp("slow",(function(){t(this).remove()}))}))})),t(document).ready((function(){t(document).on("click",".tf-import-btn",(function(e){if(e.preventDefault(),""==t('textarea[name="tf_import_option"]').val().trim()){alert(tf_options.tf_export_import_msg.import_empty);let e=t('textarea[name="tf_import_option"]');return e.focus(),void e.css("border","1px solid red")}t(".tf-option-form").submit()})),t(document).on("click",".tf-export-btn",(function(e){e.preventDefault(),t.ajax({url:tf_options.ajax_url,method:"POST",data:{action:"tf_export_data",_nonce:tf_admin_params.tf_nonce},beforeSend:function(){t(".tf-export-btn").html("Exporting..."),t(".tf-export-btn").attr("disabled","disabled")},success:function(e){let a=JSON.parse(e);if("success"===a.status){var n=new Blob([a.data],{type:"text/plain"}),o=window.URL.createObjectURL(n),i=document.createElement("a");i.href=o,i.download="tf-settings-export.json",i.click(),window.URL.revokeObjectURL(o)}else notyf.error(a.message);t(".tf-export-btn").html("Export"),t(".tf-export-btn").removeAttr("disabled")},error:function(e){console.log(e),t(".tf-export-btn").html("Export"),t(".tf-export-btn").removeAttr("disabled")}})})),t(document).on("click",".tf-add-category i",(function(e){e.preventDefault(),$this=t(this),parentDiv=$this.closest(".tf-fieldset"),parentDiv.children("#tf-popup-box").css("display","flex")})),t(document).on("click",".tf-add-category-box-close",(function(e){e.preventDefault(),t("#tf-popup-box").hide()}))})),jQuery(document).ready((function(t){const e={d1:{brand:{default:"#0E3DD8",dark:"#0A2B99",lite:"#C9D4F7"},text:{heading:"#1C2130",paragraph:"#494D59",lite:"#F3F5FD"},border:{default:"#16275F",lite:"#D1D7EE"},filling:{background:"#ffffff",foreground:"#F5F7FF"}},d2:{brand:{default:"#B58E53",dark:"#917242",lite:"#FAEEDC"},text:{heading:"#30281C",paragraph:"#595349",lite:"#FDF9F3"},border:{default:"#5F4216",lite:"#EEE2D1"},filling:{background:"#ffffff",foreground:"#FDF9F3"}},d3:{brand:{default:"#F97415",dark:"#C75605",lite:"#FDDCC3"},text:{heading:"#30241C",paragraph:"#595049",lite:"#FDF7F3"},border:{default:"#5F3416",lite:"#EEDDD1"},filling:{background:"#ffffff",foreground:"#FFF9F5"}},d4:{brand:{default:"#003061",dark:"#002952",lite:"#C2E0FF"},text:{heading:"#1C2630",paragraph:"#495159",lite:"#F3F8FD"},border:{default:"#163A5F",lite:"#D1DFEE"},filling:{background:"#ffffff",foreground:"#F5FAFF"}}};t('input[name^="tf_settings[tf-d"]').wpColorPicker({change:function(a,n){let o=t(a.target),i=o.val(),r=n.color.toString();if(function(e){if(!e)return;const a={"design-1":"tf-d1","design-2":"tf-d2","design-3":"tf-d3","design-4":"tf-d4"}[e];a&&["brand","text","border","filling"].forEach((e=>{t(`input[name^="tf_settings[${a}-${e}]"]`).each((function(){let a=t(this).attr("name").split("[")[2].replace("]",""),n=t(this).val(),o=t(`input[name="tf_settings[tf-custom-${e}][${a}]"]`);o.length&&o.val(n).trigger("change")}))}))}(t('input[name="tf_settings\\[color-palette-template\\]"]:checked').val()),r!==i){t("#tf_settings\\[color-palette-template\\]\\[custom\\]").prop("checked",!0),t(".tf-field.tf-field-color.tf-depend-hidden").addClass("tf-depend-on"),t('.tf-field.tf-field-color.tf-depend-hidden[data-value="custom"]').removeClass("tf-depend-on");let a=o.attr("name").match(/\[tf-(d\d+)-(brand|text|border|filling)]\[(.*?)\]/);if(!a)return;let n=a[1],i=a[2],s=a[3],l=t(`input[name="tf_settings[tf-custom-${i}][${s}]"]`);if(l.length){let a=t(`input[name="tf_settings[tf-${n}-${i}][${s}]"]`).val();t(`input[name="tf_settings[tf-custom-${i}][${s}]"]`).val(a).trigger("change"),t(`input[name="tf_settings[tf-${n}-${i}][${s}]"]`).val(e[n][i][s]).trigger("change"),l.val(r).trigger("change")}}}})})),jQuery(document).ready((function(t){t(".tf-plugin-button").not(".pro").on("click",(function(e){e.preventDefault();let a=t(this),n=a.data("action"),o=a.data("plugin"),i=a.data("plugin_filename");if(!n||!o)return;let r=a.find(".loader"),s=a.clone().children().remove().end().text().trim();"install"===n?a.contents().first().replaceWith("Installing.."):"activate"===n&&a.contents().first().replaceWith("Activating.."),a.addClass("loading").prop("disabled",!0),r.show(),t.ajax({url:ajaxurl,type:"POST",data:{action:"themefic_manage_plugin",security:tf_admin_params.tf_nonce,plugin_slug:o,plugin_filename:i,plugin_action:n},success:function(t){a.removeClass("loading").prop("disabled",!1),r.hide(),t.success?"install"===n?(a.contents().first().replaceWith("Activate"),a.data("action","activate").removeClass("install").addClass("activate")):"activate"===n&&a.replaceWith('<span class="tf-plugin-button tf-plugin-status active">Activated</span>'):(a.contents().first().replaceWith(s),alert("Error: "+t.data))},error:function(){a.contents().first().replaceWith(s).removeClass("loading").prop("disabled",!1),r.hide(),alert("An error occurred. Please try again.")}})}))}))}(jQuery)})();